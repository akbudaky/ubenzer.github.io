<!doctype html>
    <html lang="tr">
      <head>
        <title>Gzip Sıkıştırması ile Sitenizi Hızlandırın - UBenzer</title>
        <meta content="utf-8" name="charset"/><meta content="width=device-width, initial-scale=1.0" name="viewport"/><meta content="#2196F3" name="theme-color"/>
        <link href="/template/ui.css" media="screen" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Roboto:400,400i,700,700i&amp;amp;subset=latin-ext" media="screen" rel="stylesheet" type="text/css"/><link href="/img/favicon/apple-touch-icon-57x57.png" rel="apple-touch-icon-precomposed" sizes="57x57"/><link href="/img/favicon/apple-touch-icon-60x60.png" rel="apple-touch-icon-precomposed" sizes="60x60"/><link href="/img/favicon/apple-touch-icon-72x72.png" rel="apple-touch-icon-precomposed" sizes="72x72"/><link href="/img/favicon/apple-touch-icon-76x76.png" rel="apple-touch-icon-precomposed" sizes="76x76"/><link href="/img/favicon/apple-touch-icon-114x114.png" rel="apple-touch-icon-precomposed" sizes="114x114"/><link href="/img/favicon/apple-touch-icon-120x120.png" rel="apple-touch-icon-precomposed" sizes="120x120"/><link href="/img/favicon/apple-touch-icon-152x152.png" rel="apple-touch-icon-precomposed" sizes="152x152"/><link href="/img/favicon/favicon-196x196.png" rel="icon" sizes="196x196"/><link href="/img/favicon/favicon-128x128.png" rel="icon" sizes="128x128"/><link href="/img/favicon/favicon-96x96.png" rel="icon" sizes="96x96"/><link href="/img/favicon/favicon-32x32.png" rel="icon" sizes="32x32"/><link href="/img/favicon/favicon-16x16.png" rel="icon" sizes="16x16"/>
      </head>
      <body>
        <div><header class="header"><div class="app-bar"><h1 class="app-bar__title"><a class="app-bar__title-link" href="/">UBenzer</a></h1></div></header><div class="main-container"><div class="main-content"><article class="card main-container__items"><div class="card__contents blog-post"><div class="blog-post__date">2 Ağustos 2009</div><h1><a class="blog-post__title" href="/2009/08/gzip-sikistirmasi-ile-sitenizi-hizlandirin">Gzip Sıkıştırması ile Sitenizi Hızlandırın</a></h1><div class="markdown-content blog-post__body blog-post__content"><p><a href="http://en.wikipedia.org/wiki/Gzip#Other_uses" rel="noopener noreferrer" target="_blank">Gzip</a> bir çeşit sıkıştırma algoritmasıdır. Web açısından baktığımızda gzip, özellikle HTML, CSS ve JS gibi <em>metin tabanlı dosyalarda</em> çok ciddi derecede sıkıştırma sağlayan bir sıkıştırma yöntemidir. Birçok web sunucusu ve güncel tüm tarayıcılar <em>(ile web robotları)</em> gzip sıkıştırmasını desteklemektedir.</p>
<h2>Sıkıştırma Konusunda Anlaşmak</h2>
<p>Siz bir web sayfasını açmak üzere tarayıcınıza tıkladığınızda, arkada bir çok şey olur. Bunlardan biri de, isteğin hangi formatta olacağına karar verilmesidir. Bir web sayfası açmaya çalıştığınızda tarayıcınız sizin için aşağıdakine benzer bir bilgi gönderir:</p>
<p><em>(Request Header)</em> <a href="/2009/08/gzip-sikistirmasi-ile-sitenizi-hizlandirin/sample-request-header.jpg" target="_blank"><span class="img fade-box ">
    <img class="fade-box__lores" src="/2009/08/gzip-sikistirmasi-ile-sitenizi-hizlandirin/sample-request-header.scaled-jpg-50.jpg" alt="sample-request-header" width="841" height="227">
    <img class="lazyload fade-box__hires" data-src="/2009/08/gzip-sikistirmasi-ile-sitenizi-hizlandirin/sample-request-header.scaled-jpg-500.jpg" title="sample-request-header" alt="sample-request-header"width="841" height="227" data-srcset="/2009/08/gzip-sikistirmasi-ile-sitenizi-hizlandirin/sample-request-header.scaled-jpg-50.jpg 50w, /2009/08/gzip-sikistirmasi-ile-sitenizi-hizlandirin/sample-request-header.scaled-jpg-200.jpg 200w, /2009/08/gzip-sikistirmasi-ile-sitenizi-hizlandirin/sample-request-header.scaled-jpg-500.jpg 500w, /2009/08/gzip-sikistirmasi-ile-sitenizi-hizlandirin/sample-request-header.jpg 841w">
  </span>
</a></p>
<p>Burada gönderdiğiniz bilgilerden <em>Accept: <em>/</em></em> ve <em>Accept-Encoding: gzip,deflate</em> satırlarına dikkatinizi çekmek istiyorum. <em>Accept</em>, istemcinin <em>(yani tarayıcınızın)</em> kabul ettiği <em><a href="http://en.wikipedia.org/wiki/MIME" rel="noopener noreferrer" target="_blank">MIME</a></em> <em>(Multipurpose Internet Mail Extensions)</em> tiplerini, <em>Accept-Encoding</em> ise kabul ettiği kodlama biçimlerini gösterir.</p>
<p>Tarayıcınız sizin adınıza <em>gzip</em> ve <em>deflate</em> algoritmaları ile sıkıştırılmış verileri kabul ettiğini gönderiyor. Karşıdaki sunucu da <em>(eğer bu sıkıştırmayı destekliyorsa)</em> size verileri sıkıştırarak gönderebilir. Sunucu, veri aktarımından önce aşağıdakine benzer bir bilgi gönderir:</p>
<p><em>(Response Header)</em> <a href="/2009/08/gzip-sikistirmasi-ile-sitenizi-hizlandirin/sample-response-header.jpg" target="_blank"><span class="img fade-box ">
    <img class="fade-box__lores" src="/2009/08/gzip-sikistirmasi-ile-sitenizi-hizlandirin/sample-response-header.scaled-jpg-50.jpg" alt="sample-response-header" width="409" height="222">
    <img class="lazyload fade-box__hires" data-src="/2009/08/gzip-sikistirmasi-ile-sitenizi-hizlandirin/sample-response-header.jpg" title="sample-response-header" alt="sample-response-header"width="409" height="222" data-srcset="/2009/08/gzip-sikistirmasi-ile-sitenizi-hizlandirin/sample-response-header.scaled-jpg-50.jpg 50w, /2009/08/gzip-sikistirmasi-ile-sitenizi-hizlandirin/sample-response-header.scaled-jpg-200.jpg 200w, /2009/08/gzip-sikistirmasi-ile-sitenizi-hizlandirin/sample-response-header.jpg 409w">
  </span>
</a></p>
<p>Burada <em>Content-Type</em> ve <em>Content-Encoding</em> satırlarına dikkat etmenizi istiyorum. Content-Type ile dönen verinin MIME tipinin <em>text/html</em> olduğu ve bu dosyanın <em>UTF-8</em> ile kodlandığı belirtilmiş ve ardından <em>Content-Encoding</em> ile de gelen verinin hangi algoritmayla sıkıştırıldığı gönderilmiştir.</p>
<h2>Anlaştık Sanırım</h2>
<p>Yukarıdaki kısımda görülebileceği üzere, tarayıcı hangi tipleri algılayabildiğini göndermiş, sunucu destekliyorsa cevabını bu algoritmalardan biriyle sıkıştırarak göndermiş ve fiber optik kablolar daha az veri taşıdığı için mutlu olmuşlardır. Siteniz daha hızlı açıldığından okurlarınızda kocaman bir gülümseme oluşurken, siz de ay sonunda bandwidth kullanımınızın azaldığını görünce onlara katılırsınız.</p>
<h2>Ne Kadar Sıkıştırıyor?</h2>
<p>Gzip, özellikle metinlerde etkili bir algoritmadır. Aynı zamanda sıkıştırma/açma hızı yüksek bir algoritma olduğundan sıkça tercih edilir. Ben veritabanı yedeklerimi sunucumdan gzip ile sıkıştırılmış olarak çekiyorum. <em>30 Megabaytlık bir veri tabanını</em> <em>(SQL, metin formatında)</em> <em>7 MB'a sıkıştırdığını</em> kendim biliyorum. Web'de CSS, HTML ve JavaScript dosyalarında bu kadar sık kullanışmasının nedeni de tam olarak bu performans. =)</p>
<h2>Nasıl Aktifleştiririm?</h2>
<p>Sunucunuzda gzip sıkıştırması kullanmak için pek çok yöntem vardır. Bu yazıda <em>Apache</em> ve uyumlu sunucular <em>(mesela Litespeed)</em> için, <em>.htaccess</em> dosyaları ile bu özelliği açmak anlatılacak.</p>
<p>Sitenizin kök klasöründeki <em>.htaccess</em> dosyasını açın. <em>(Yoksa kendiniz yaratın.)</em> Daha sonra <em>gzip</em> sıkıştırmasını açmak için bu dosyanın en üstüne aşağıdaki kodu kopyalayın ve dosyayı kaydedin.</p>
<p><code>SetOutputFilter DEFLATE</code></p>
<p>Bu kod, sitenizdeki <em>js</em> ve <em>css</em> uzantılı dosyalar için <em>gzip</em> sıkıştırmasını açacaktır. Yukarıdaki kodda neden php uzantısının neden olmadığını merak etmişsinizdir muhtemelen. Bu dosyaların çıktısı PHP ile dinamik olarak oluşturulduğu için, sıkıştırılması PHP da ile ayarlanır. Bununla ilgili bilgi almak için <a href="http://us.php.net/manual/tr/intro.zlib.php" rel="noopener noreferrer" target="_blank">şuraya ışınlanabilirsiniz</a>. <em>PHP'de <a href="http://php.net/manual/en/function.ob-gzhandler.php" rel="noopener noreferrer" target="_blank">ob_gzhandler</a> kullanımı artık tavsiye edilmemektedir.</em></p>
<p>Yukarıdaki kodu <em>.htaccess</em> dosyanıza ekledikten sonra <em>500 Internal Server Error</em> hatası alıyorsanız ya da bir gariplik olduysa sunucnuzda <em><a href="http://httpd.apache.org/docs/2.0/mod/mod_deflate.html" rel="noopener noreferrer" target="_blank">mod_deflate</a></em> veya <em><a href="http://httpd.apache.org/docs/2.0/mod/mod_ext_filter.html" rel="noopener noreferrer" target="_blank">mod_ext_filter</a></em> eklentisi yüklü olmayabilir. Bu durumda sıkıştırmayı <em>(en azından benim anlattığım yöntemle)</em> yapamazsınız. Hosting şirketinizin başının etini yemeniz şiddetle önerilir.</p>
<h2>Daha da Gelmem</h2>
<p>Dilerseniz aşağıdaki <em>.htaccess</em> kodlarını da ekleyerek sitenizde ufak birkaç iyileştirme daha yapabilirsiniz:</p>
<p><code>ExpiresActive On ExpiresDefault A604800 Header append Cache-Control &quot;public&quot;</code></p>
<p>Bu kod, <em>aksi belirtilmediği halde</em> gönderilen bilginin tarayıcı tarafından ön belleğe atılmasını ve bir hafta geçerli olmasını sağlar. (Böylece fotoğraflar ve görseller her seferinde sunucunuzdan yüklenmek zorunda kalmaz.)</p>
<p><code>AddDefaultCharset UTF-8 DefaultLanguage tr-TR</code></p>
<p>Bu kod, belirtilen uzantılı dosyalar için <em>aksi belirtilmediği halde</em> varsayılan dilin Türkçe ve karakter kodlamasının UTF-8 olmasını sağlar. <em>(Bunlar HTTP Header bilgileridir, HTML Head meta taglarını siz ayarlamalısınız. Tarayıcılar HTML Meta Charset ile HTTP Header Charset uyuşmadığı takdirde hangisini kullanacakları konusunda farklı tepkiler verirler.)</em></p>
<h2>Bitirirken</h2>
<p>Bugünlük bu kadar. İyi geceler efendim.</p>
</div></div></article><div class="card comments main-container__items"><div class="card__contents" id="disqus_thread"></div></div></div><div class="sidebar main-content__sidebar"><div class="about"><img class="about__image" src="/img/profile.jpg"/><h1 class="about__name">Umut Benzer</h1><h2 class="about__mini-bio">Software Engineer in Berlin</h2></div></div></div><div class="main-container"><div class="footer"><div class="footer__copyright-holder"><p><a href="http://creativecommons.org/licenses/by-nc-nd/4.0/" rel="license noopener noreferrer" target="_blank"><img alt="Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License" src="/img/cclicense.png"/></a></p><p><span>Bu sitedeki tüm yazı ve görseller </span><a href="http://creativecommons.org/licenses/by-nc-nd/4.0/" rel="license noopener noreferrer" target="_blank">Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License</a><span> ile lisanslanmıştır.</span></p></div><div class="footer__generator"><span>Bu sayfa </span><span>18 Nisan 2017</span><span> tarihinde </span><a href="https://github.com/ubenzer/fil" target="_blank">Fil</a><span> ile yaratılmıştır.</span></div></div></div></div>
        <script src="/template/app.js" type="text/javascript"></script><script type="text/javascript">
        var disqus_config = function () {
          this.page.url = "https://ubenzer.com/2009/08/gzip-sikistirmasi-ile-sitenizi-hizlandirin";
          this.page.identifier = "post@/2009/08/gzip-sikistirmasi-ile-sitenizi-hizlandirin";
        };
        (function() {
          var d = document, s = d.createElement('script');
          s.src = 'https://ubenzer.disqus.com/embed.js';
          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
        </script><script type="text/javascript">
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-509698-8', 'auto');
      ga('send', 'pageview');
      </script>
      </body>
    </html>
  