<!doctype html>
    <html lang="tr">
      <head>
        <title>Makine Kodu ile Red Alert 3 Yazdık - UBenzer</title>
        <meta content="utf-8" name="charset"/><meta content="width=device-width, initial-scale=1.0" name="viewport"/><meta content="#2196F3" name="theme-color"/><meta content="Tamam tamam yazmadık. Abarttım ben." name="description"/><meta content="article" property="og:type"/><meta content="106731154350" property="fb:app_id"/><meta content="tr_TR" property="og:locale"/><meta content="https://ubenzer.com/2010/05/makine-kodu-ile-red-alert-3-yazdik/" property="og:url"/><meta content="Makine Kodu ile Red Alert 3 Yazdık" property="og:title"/><meta content="Tamam tamam yazmadık. Abarttım ben." property="og:description"/><meta content="https://ubenzer.com/2010/05/makine-kodu-ile-red-alert-3-yazdik/error.jpg" property="og:image"/>
        <link href="/ui.css" media="screen" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Roboto:400,400i,700,700i&amp;amp;subset=latin-ext" media="screen" rel="stylesheet" type="text/css"/><link href="/static/img/favicon/apple-touch-icon-57x57.png" rel="apple-touch-icon-precomposed" sizes="57x57"/><link href="/static/img/favicon/apple-touch-icon-60x60.png" rel="apple-touch-icon-precomposed" sizes="60x60"/><link href="/static/img/favicon/apple-touch-icon-72x72.png" rel="apple-touch-icon-precomposed" sizes="72x72"/><link href="/static/img/favicon/apple-touch-icon-76x76.png" rel="apple-touch-icon-precomposed" sizes="76x76"/><link href="/static/img/favicon/apple-touch-icon-114x114.png" rel="apple-touch-icon-precomposed" sizes="114x114"/><link href="/static/img/favicon/apple-touch-icon-120x120.png" rel="apple-touch-icon-precomposed" sizes="120x120"/><link href="/static/img/favicon/apple-touch-icon-152x152.png" rel="apple-touch-icon-precomposed" sizes="152x152"/><link href="/static/img/favicon/favicon-196x196.png" rel="icon" sizes="196x196"/><link href="/static/img/favicon/favicon-128x128.png" rel="icon" sizes="128x128"/><link href="/static/img/favicon/favicon-96x96.png" rel="icon" sizes="96x96"/><link href="/static/img/favicon/favicon-32x32.png" rel="icon" sizes="32x32"/><link href="/static/img/favicon/favicon-16x16.png" rel="icon" sizes="16x16"/><link href="https://ubenzer.com/2010/05/makine-kodu-ile-red-alert-3-yazdik/" rel="canonical"/>
      </head>
      <body>
        <div><header class="header"><div class="app-bar"><h1 class="app-bar__title"><a class="app-bar__title-link" href="/">UBenzer</a></h1></div></header><div class="main-container"><div class="main-content"><article class="card main-container__items"><div class="card__contents blog-post"><div class="blog-post__date">28 Mayıs 2010</div><h1><a class="blog-post__title" href="/2010/05/makine-kodu-ile-red-alert-3-yazdik/">Makine Kodu ile Red Alert 3 Yazdık</a></h1><div class="markdown-content blog-post__body blog-post__content"><p>Tamam tamam <a href="/2010/05/makine-kodu-ile-red-alert-3-yazdik/2010/05/makine-kodu-ile-red-alert-3-yaziniz" >yazmadık</a>. Abarttım ben.</p>
<p>Ama ASM ile yılan oyunu yaptık. <em>8051 serisi mikrodenetleyicilerde</em> çalışacak bir yılan oyunu. Sırf ASM ile.</p>
<p>Vallahi boş işler yapmıyoruz. Ödev bu, ondan yaptık. 😄</p>
<p>Evet C gibi bir dil varken, bizden inatla ASM’de yazmamızı istediler, yanlış anlamadınız.</p>
<p>Yo yo, C'yi derste de gördük. Gösterdiler yani. Ama yine de inatla ASM'de yazmamızı istediler.</p>
<p>Vallahi ben anlamadım mantığını. Nedenini sordum, <em>&quot;Biz öyle uygun gördük.&quot;</em> dediler.</p>
<p>Cidden.</p>
<p><em>Hiçbir okurumu inandıramadım. Özlem’e sorun. İnanırsınız. Zaten takım arkadaşım da o. Kod yazdığıma falan inanmazsanız ona da inandırır.</em></p>
<h2>Ödev</h2>
<p>Her neyse… ASM ile bizden oyun istediler. Derste C görmemize rağmen hem de. Uğraşmazsak olmaz ya!</p>
<p>Biz de tasarladık. <em>Net 15 saatimizi aldı.</em> Hata ayıklarken canımız çıktı. Programı yazarken <em>bize derste gösterilen</em> Linux üzerinde çalışan <em>MCU IDE</em> isimli yazılımı kullandık. Ama program <em>öyle yavaş ve öyle sorunluydu ki</em>, <em>defalarca çöktüğü gibi</em>, mikrosaniyelik işi yapması saniyeler alıyordu. Yani görüp <em>görülebilecek en kötü IDE’lerden biriydi</em>.</p>
<p><a href="/2010/05/makine-kodu-ile-red-alert-3-yazdik/error.jpg" target="_blank"><span class="img fade-box center big">
    <img class="fade-box__lores" src="/2010/05/makine-kodu-ile-red-alert-3-yazdik/error.scaled-jpg-50.jpg" alt="error" width="660" height="300">
    <img class="lazyload fade-box__hires" data-src="/2010/05/makine-kodu-ile-red-alert-3-yazdik/error.jpg" title="error" alt="error"width="660" height="300" data-srcset="/2010/05/makine-kodu-ile-red-alert-3-yazdik/error.scaled-jpg-50.jpg 50w, /2010/05/makine-kodu-ile-red-alert-3-yazdik/error.scaled-jpg-200.jpg 200w, /2010/05/makine-kodu-ile-red-alert-3-yazdik/error.scaled-jpg-500.jpg 500w, /2010/05/makine-kodu-ile-red-alert-3-yazdik/error.jpg 660w">
    <span style="padding-top: 45.45454545454545%" class="fade-box__aspect_ratio_el">&nbsp;</span>
  </span>
</a></p>
<p>En az beş altı defa çöktü. Ve biz bu IDE’de yılan yazdık!</p>
<p><a href="/2010/05/makine-kodu-ile-red-alert-3-yazdik/keil.jpg" target="_blank"><span class="img fade-box center big">
    <img class="fade-box__lores" src="/2010/05/makine-kodu-ile-red-alert-3-yazdik/keil.scaled-jpg-50.jpg" alt="keil" width="432" height="212">
    <img class="lazyload fade-box__hires" data-src="/2010/05/makine-kodu-ile-red-alert-3-yazdik/keil.jpg" title="keil" alt="keil"width="432" height="212" data-srcset="/2010/05/makine-kodu-ile-red-alert-3-yazdik/keil.scaled-jpg-50.jpg 50w, /2010/05/makine-kodu-ile-red-alert-3-yazdik/keil.scaled-jpg-200.jpg 200w, /2010/05/makine-kodu-ile-red-alert-3-yazdik/keil.jpg 432w">
    <span style="padding-top: 49.074074074074076%" class="fade-box__aspect_ratio_el">&nbsp;</span>
  </span>
</a>{right}Daha doğrusu yazamadık ve bir süre sonra <a href="http://www.fxdev.org/" rel="noopener noreferrer" target="_blank">FxDev</a>’den yardım isteyince, bize Windows’ta çalışan ve <em>adam gibi çalışan</em>, <em>orası burası çökmeyen</em> ve yazdığımız kodu 8051’e göre gerçekzamanlı işleyebilen bir yazılım önerdi: <em>Keil uVision</em>.</p>
<p>Kodu hemencecik Windows’a taşıdık ve bu programda tasarıma devam ettik. Canımız çıka çıka, saya söve ödevi bitirdik.</p>
<h2>Kontrol</h2>
<p>Ödev kontrolünde hocamız bize bu ödevin bize ne kattığını sordu. Ben de açık açık söyledim kendisine: <em>“Açıkçası üç günümüzü boşa harcamaktan başka bir şey katmadı.”</em> Meğerse öyle değilmiş… Bu ödev bize, eğer ileride alt seviyeli işlerle meşgul bir yerde çalışır<em>sak</em> <em>(mesela embedded)</em> o zaman işlerin nasıl gittiğine dair fikrimiz olmasını sağlayacakmış.</p>
<p>Kimse bu ödevi vermeden önce, gelecekte ne yapacağımı sormadı ki bana! Ben gelecekte alt seviyeyle falan uğraşmayacağım, “webci” olacağım ben, ben niye yapıyorum o zaman? Bunun cevabı yok tabi. Aslında var: Finali %20 etkiliyor da ondan yapıyorum.</p>
<p>Neyse, böyle bir ödevi yaptık.</p>
<p><a href="/2010/05/makine-kodu-ile-red-alert-3-yazdik/program-ss.jpg" target="_blank"><span class="img fade-box center big">
    <img class="fade-box__lores" src="/2010/05/makine-kodu-ile-red-alert-3-yazdik/program-ss.scaled-jpg-50.jpg" alt="program-ss" width="1919" height="1040">
    <img class="lazyload fade-box__hires" data-src="/2010/05/makine-kodu-ile-red-alert-3-yazdik/program-ss.scaled-jpg-500.jpg" title="program-ss" alt="program-ss"width="1919" height="1040" data-srcset="/2010/05/makine-kodu-ile-red-alert-3-yazdik/program-ss.scaled-jpg-50.jpg 50w, /2010/05/makine-kodu-ile-red-alert-3-yazdik/program-ss.scaled-jpg-200.jpg 200w, /2010/05/makine-kodu-ile-red-alert-3-yazdik/program-ss.scaled-jpg-500.jpg 500w, /2010/05/makine-kodu-ile-red-alert-3-yazdik/program-ss.scaled-jpg-1000.jpg 1000w, /2010/05/makine-kodu-ile-red-alert-3-yazdik/program-ss.scaled-jpg-1500.jpg 1500w, /2010/05/makine-kodu-ile-red-alert-3-yazdik/program-ss.jpg 1919w">
    <span style="padding-top: 54.19489317352788%" class="fade-box__aspect_ratio_el">&nbsp;</span>
  </span>
</a></p>
<h2>Teknik Bilgiler</h2>
<p>Biraz da teknik bilgi verelim şimdi.</p>
<ul>
<li>Program klasik bir yılan oyunudur.</li>
<li>Oyun 40H ile 7FH bellek bölgeleri arasında oynanmaktadır.</li>
<li>Elmalar 0FFH’tir.</li>
<li>Yılan’ın başı 01H ve devamı 02H, 03H.. diye gitmektedir.</li>
<li>Veriler Port 0’dan alınır.</li>
<li>0.0 sol, 0.1 sağ, 0.2 yukarı, 0.3 aşağı yönlerini kontrol eder. Aynı anda iki tane girişe basılmamalıdır. Basılırsa sistem bir tanesini kabul eder, diğerini yok sayar.</li>
<li>0.4 yılanı yavaşlatır, 0.5 hızlandırır.</li>
<li>Yılanı kontrol etmek için yön tuşuna sürekli basmanız gerekmemektedir. Hiçbir tuşa basmazsanız aynı yönde devam eder.</li>
<li>Yılan sola giderken bir anda sağa gidemez. <em>(180 derece dönüş olmaz.)</em></li>
<li>Oyun tahtasında sınır yoktur. Bir taraftan çıkınca öbür taraftan girer.</li>
<li>Elmalar, T1 zamanlayıcısındaki MOD2 sayacı ile rastgele üretilir.</li>
<li>T0, MOD1 yılanın hızını ayarlamak için kullanılır.</li>
<li>Oyun yılan kendine çarpınca biter.</li>
<li>Çarpışmanın olduğu yer 0FEH ile gösterilir.</li>
<li>Skor oyunun sonunda bilumum registerlara ve aküye yazılır.</li>
<li>Skor, yenilen elma sayısıdır.</li>
<li>Elmalar GDO’lu değildir.</li>
</ul>
<h2>Bitirirken</h2>
<p>Bu kadar incik cıncık özelliği olan bir ödevi, zaten kısıtlı ve değerli olan vaktimizde bize yaptırılmasının yanlış olduğunu düşündüğümü tekrar söylemeden geçemiyor ve oyunun ödev metinini, raporumuzu ve kaynak kodumuzu aşağıda paylaşıyorum.</p>
<p>Teknik birkaç ayrıntıya rapordan ulaşabilirsiniz.</p>
<p>Kaynak kodları <em>(olur da anlarsanız 😄 )</em> istediğiniz gibi kullanabilirisiniz. Kodları indirmek istemezseniz her zamanki gibi yazının sonunda bulabilirsiniz.</p>
<ul>
<li><a href="/2010/05/makine-kodu-ile-red-alert-3-yazdik/snake-odev-metni.pdf" >Ödev Metni</a></li>
<li><a href="/2010/05/makine-kodu-ile-red-alert-3-yazdik/snake-rapor.pdf" >Proje Raporu</a></li>
<li><a href="/2010/05/makine-kodu-ile-red-alert-3-yazdik/snake.asm" >Bizim Çözümümüz</a> <em>(snake.asm)</em></li>
</ul>
<h2>Kodlar</h2>
<p>[plain] ; YILANIN BASINI KUCUKKEN EZECEKSIN YEGEN (16:1 ) MOV 63H, #001H ;YILANIN BASLANGIC KONUMU MOV 64H, #002H ;YILANIN BASLANGIC KONUMU MOV R2, #00H ; YILANIN GIDECEGI YON 00H:sol, 01H:sag, 02H:ust, 03H:alt -Default olarak soldan baslatilir.- MOV R6, #002H ;YILANIN BASLANGIC UZUNLUGU MOV 008H, #0100D ;BASLANGIC HIZI</p>
<p>; ZAMANLAYICIYA AIT SURUYLE KOD BASLA: MOV R7, 008H ;Baslangic hizi R7 registerina atilir.</p>
<p>ZAMANLAYICI: MOV 16H, #0FFH IC_ZAMANLAYICI: MOV TMOD, #00100001B ;ZAMANLAYICI 1 MOD2'DE ZAMANLAYICI ZAMANLAYICI 0 MOD 1'DE MOV TH0, #0FFH ;Zamanlayici 0'ın donme sayisi TH0 ve TL0 ile ayarlanir. MOV TL0, #0FFH MOV TH1, #63D ;Zamanlayici 1'in donme sayisi TH1 ve TL1 ile ayarlanir. MOV TL1, #63D SETB TR0 ; Zamanlayici 0 calismaya baslar. SETB TR1 ; Zamanlayici 1 calismaya baslar.</p>
<p>; YILAN HIZINA GORE BEKLEMEK BEKLE: JNB TF0, BEKLE CLR TF0 DJNZ 16H, IC_ZAMANLAYICI</p>
<p>DJNZ R7, ZAMANLAYICI</p>
<p>; EKRANA RASTGELE ELMA KOYMA (ELMALAR FFH) ; GUNCEL ELMANIN YERI O9H ADRESINDE TUTULUR. BU ADRESTE 00 VARSA ELMA YOK DEMEKTIR. ; EGER ELMA YOKSA BIR TANE RASTGELE YARATILIR VE BELLEGE FFH OLARAK ISLENIR.</p>
<p>MOV A, 09H JNZ PORT_KONTROL</p>
<p>MOV A, R6 SUBB A, #64D JNZ ELMA_YARAT LJMP BITTI</p>
<p>ELMA_YARAT: ;ELMA YARAT MOV R0, TL1;SAYACTAKI DEGERI (YENI ELMA KOORDINATINI AL) MOV A,@R0 ;ELMANIN OLUSTURULMASI DUSUNULEN NOKTANIN ICI A'YA ATILIR. ;BU NOKTADA 00H DISINDA BIR SEY VARSA, YILANIN USTUNDE ELMA OLUSTUYORUZ DEMEKTIR. JNZ ELMA_YARAT ;BU NOKTADA ARTIK ELMAYI YARATABILIRIZ MOV @R0, #0FFH MOV 09H, R0 JMP PORT_KONTROL</p>
<p>; PORTTAN BILGI ALIP GIDILECEK YONE KARAR VERMEK VEYA HIZ ARTIRIP AZALTMAK PORT_KONTROL: MOV P0, #0FFH ;P0 giris portu olarak ayarlanir. MOV C, P0.0 ; Yilanin sola donmesi isteniyorsa JNB CY, SOLL MOV C, P0.1 ;Yilanin saga donmesi isteniyorsa JNB CY, SAGL MOV C, P0.2 ;Yilanin yukari cikmasi isteniyorsa JNB CY, USTL MOV C, P0.3 ;Yilanin asagi inmesi isteniyorsa JNB CY, ALTL MOV C, P0.4 ;Yilan hizlandirilmak isteniyorsa JNB CY, HIZLANDIR MOV C, P0.5 ;Yilan yavaslatilmak isteniyorsa JNB CY, YAVASLAT</p>
<p>; YON BELIRTILMEMISSE (YANI HIC GIRDI YOKSA, EN SON NEREYE GIDILIYORSA ORAYA GITMEYE DEVAM ETMEK) YONBELIRTILMEMIS: CJNE R2, #00H, YON_SOL_DEGIL ; Bir onceki yonun ne olduguna bakilir, teker teker. Yukarida aciklanan kabullenmeler kullanilir. JMP SOLL YON_SOL_DEGIL: CJNE R2, #01H, YON_SAG_DA_DEGIL JMP SAGL YON_SAG_DA_DEGIL: CJNE R2, #02H, YON_UST_DEGIL JMP USTL YON_UST_DEGIL: JMP ALTL HIZLANDIR: ;Yilan hizlandiriliyor... MOV A, 008H CLR C SUBB A, #20D MOV 008H, A JNZ BASLA MOV 008H, #20D JMP BASLA YAVASLAT: ;Yilan yavaslatiliyor... MOV A, 008H ADD A, #20D MOV 008H, A CLR CY SUBB A,#0F0H JNZ LBASLA MOV 008H, #0DCH LJMP BASLA LBASLA: LJMP BASLA ;Asagida, yilan belli bir yone giderken tam ters yon secilmisse, secilen yonun ignore edilip yilanin gittigi yonde devam etmesi saglanmistir. ;Ters yonden kastimiz, yilan sola giderken saga gitmesinin istenmesi ya da yilan yukari cikarken asagi gitmesinin istenmesidir. ;Boyle bir durumda yilan yon secimi hic yapilmamis gibi gittigi yonde devam eder. SOLL: CJNE R2, #01H, SOLDAN_DEVAM_ET LJMP SAG SOLDAN_DEVAM_ET: MOV R2, #00H LJMP SOL SAGL: CJNE R2, #00H, SAGDAN_DEVAM_ET LJMP SOL SAGDAN_DEVAM_ET: MOV R2, #01H LJMP SAG USTL: CJNE R2, #03H, USTTEN_DEVAM_ET LJMP ALT USTTEN_DEVAM_ET: MOV R2, #02H LJMP UST ALTL: CJNE R2, #02H, ALTTAN_DEVAM_ET LJMP UST ALTTAN_DEVAM_ET: MOV R2, #03H LJMP ALT SOL: ;YILAN HAREKETLERI MOV R5, #001H ;YILANIN BASINI BUL (BULUNACAK OLAN YE R5'E ATILMALIDIR) MOV R0, #040H BAS_SOL_ARA: MOV A,@R0 CJNE A, 005H, BAS_SOL_YOK JMP BAS_SOL_VAR BAS_SOL_YOK: INC R0 JMP BAS_SOL_ARA BAS_SOL_VAR: ;R0'IN ICERISINDE YILANIN BIYERI VAR. HAREKET_SOL: MOV @R0, #0FEH ; KOSELERE GELMIS MI KONTROLLERI (SOL) ; Her kose teker teker kontrol edilir ve yilanin duvardan gecmesi saglanir. MOV A,#40H CJNE A, 00H, YOK40_SOL MOV R0, #47H JMP SOL_TAMAM YOK40_SOL: MOV A,#48H CJNE A, 00H, YOK48_SOL MOV R0, #4FH JMP SOL_TAMAM YOK48_SOL: MOV A,#50H CJNE A, 00H, YOK50_SOL MOV R0, #57H JMP SOL_TAMAM YOK50_SOL: MOV A,#58H CJNE A, 00H, YOK58_SOL MOV R0, #5FH JMP SOL_TAMAM YOK58_SOL: MOV A,#60H CJNE A, 00H, YOK60_SOL MOV R0, #67H JMP SOL_TAMAM YOK60_SOL: MOV A,#68H CJNE A, 00H, YOK68_SOL MOV R0, #6FH JMP SOL_TAMAM YOK68_SOL: MOV A,#70H CJNE A, 00H, YOK70_SOL MOV R0, #77H JMP SOL_TAMAM YOK70_SOL: MOV A,#78H CJNE A, 00H, YOK78_SOL MOV R0, #7FH JMP SOL_TAMAM YOK78_SOL: DEC R0</p>
<p>SOL_TAMAM: ;OYUN SONU VE YILAN ELMA YEDI MI KONTROLLERI MOV A, @R0 JNZ SOL_BUYU JMP SOL_ILERI SOL_BUYU: ; Yilanin buyumesi lazım. CLR C SUBB A, #0FFH JNZ SOL_BITTI MOV 010H, #0FFH ;BUYU BAYTINI SET ET JMP SOL_ILERI SOL_BITTI: ;Yilanin boyunun 8 olmasi durumunda bir sirada yuruyebilmesinin saglanmasi amaciyla yazilmis bir dizi kod... MOV A, @R0 CLR C SUBB A, R6 JNZ SOL_CIDDEN_BITTI MOV 011H, #0FFH ;YILAN TAM UCTA BAYTINI SET SET JMP SOL_ILERI</p>
<p>SOL_CIDDEN_BITTI: LJMP BITTI SOL_ILERI: MOV @R0, #001H</p>
<p>;DEGISECEK BITTI MOV R4, #002H ; BIR SONRAKI YILANIN YERI (SBIZLEYE PARAMATRE OLARAK KULLANDIK) JMP SBIZLE</p>
<p>SAG: ;YILAN HAREKETLERI MOV R5, #001H ;YILANIN BASINI BUL (BULUNACAK OLAN YE R5'E ATILMALIDIR) MOV R0, #040H BAS_SAG_ARA: MOV A,@R0 CJNE A, 005H, BAS_SAG_YOK JMP BAS_SAG_VAR BAS_SAG_YOK: INC R0 JMP BAS_SAG_ARA BAS_SAG_VAR: ;R0'IN ICERISINDE YILANIN BIYERI VAR. HAREKET_SAG: MOV @R0, #0FEH ; KOSELERE GELMIS MI KONTROLLERI (SAG) ; Her kose teker teker kontrol edilir ve yilanin duvardan gecmesi saglanir. ;DEGISECEK BASLA MOV A,#47H CJNE A, 00H, YOK47_SAG MOV R0, #40H JMP SAG_TAMAM YOK47_SAG: MOV A,#4FH CJNE A, 00H, YOK4F_SAG MOV R0, #48H JMP SAG_TAMAM YOK4F_SAG: MOV A,#57H CJNE A, 00H, YOK57_SAG MOV R0, #50H JMP SAG_TAMAM YOK57_SAG: MOV A,#5FH CJNE A, 00H, YOK5F_SAG MOV R0, #58H JMP SAG_TAMAM YOK5F_SAG: MOV A,#67H CJNE A, 00H, YOK67_SAG MOV R0, #60H JMP SAG_TAMAM YOK67_SAG: MOV A,#6FH CJNE A, 00H, YOK6F_SAG MOV R0, #68H JMP SAG_TAMAM YOK6F_SAG: MOV A,#77H CJNE A, 00H, YOK77_SAG MOV R0, #70H JMP SAG_TAMAM YOK77_SAG: MOV A,#7FH CJNE A, 00H, YOK7F_SAG MOV R0, #78H JMP SAG_TAMAM YOK7F_SAG: INC R0 SAG_TAMAM: ;OYUN SONU VE YILAN ELMA YEDI MI KONTROLU MOV A, @R0 JNZ SAG_BUYU JMP SAG_ILERI SAG_BUYU: CLR C SUBB A, #0FFH JNZ SAG_BITTI MOV 010H, #0FFH ;BUYU BAYTINI SET ET JMP SAG_ILERI SAG_BITTI: ;Yilanin boyunun 8 olmasi durumunda bir sirada yuruyebilmesinin saglanmasi amaciyla yazilmis bir dizi kod... MOV A, @R0 CLR C SUBB A, R6 JNZ SAG_CIDDEN_BITTI MOV 011H, #0FFH ;YILNAN TAM UCTA BAYTINI SET SET JMP SAG_ILERI</p>
<p>SAG_CIDDEN_BITTI: LJMP BITTI SAG_ILERI: MOV @R0, #001H</p>
<p>;DEGISECEK BITTI MOV R4, #002H ; BIR SONRAKI YILANIN YERI (SBIZLEYE PARAMATRE OLARAK KULLANDIK) JMP SBIZLE</p>
<p>UST: ;YILAN HAREKETLERI MOV R5, #001H ;YILANIN BASINI BUL (BULUNACAK OLAN YE R5'E ATILMALIDIR) MOV R0, #040H BAS_UST_ARA: MOV A,@R0 CJNE A, 005H, BAS_UST_YOK JMP BAS_UST_VAR BAS_UST_YOK: INC R0 JMP BAS_UST_ARA BAS_UST_VAR: ;R0'IN ICERISINDE YILANIN BIYERI VAR. HAREKET_UST: MOV @R0, #0FEH ; KOSELERE GELMIS MI KONTROLLERI (UST) ; Her kose teker teker kontrol edilir ve yilanin duvardan gecmesi saglanir. MOV A,#40H CJNE A, 00H, YOK40_UST MOV 78H, #001H JMP UST_TAMAM YOK40_UST: MOV A,#41H CJNE A, 00H, YOK41_UST MOV R0, #79H JMP UST_TAMAM YOK41_UST: MOV A,#42H CJNE A, 00H, YOK42_UST MOV R0, #7AH JMP UST_TAMAM YOK42_UST: MOV A,#43H CJNE A, 00H, YOK43_UST MOV R0, #7BH JMP UST_TAMAM YOK43_UST: MOV A,#44H CJNE A, 00H, YOK44_UST MOV R0, #7CH JMP UST_TAMAM YOK44_UST: MOV A,#45H CJNE A, 00H, YOK45_UST MOV R0, #7DH JMP UST_TAMAM YOK45_UST: MOV A,#46H CJNE A, 00H, YOK46_UST MOV R0, #7EH JMP UST_TAMAM YOK46_UST: MOV A,#47H CJNE A, 00H, YOK47_UST MOV R0, #7FH JMP UST_TAMAM YOK47_UST: CLR C MOV A,R0 SUBB A, #8H MOV R0,A</p>
<p>UST_TAMAM:</p>
<p>;OYUN SONU VE YILAN ELMA YEDI MI KONTROLU MOV A, @R0 JNZ UST_BUYU JMP UST_ILERI UST_BUYU: CLR C SUBB A, #0FFH JNZ UST_BITTI ;Yilanin boyunun 8 olmasi durumunda bir sirada yuruyebilmesinin saglanmasi amaciyla yazilmis bir dizi kod... MOV 010H, #0FFH ;BUYU BAYTINI SET ET JMP UST_ILERI UST_BITTI: MOV A, @R0 CLR C SUBB A, R6 JNZ UST_CIDDEN_BITTI MOV 011H, #0FFH ;YILNAN TAM UCTA BAYTINI SET SET JMP UST_ILERI</p>
<p>UST_CIDDEN_BITTI: LJMP BITTI UST_ILERI: MOV @R0, #001H ;DEGISECEK BITTI</p>
<p>MOV R4, #002H ; BIR SONRAKI YILANIN NOSU (SBIZLEYE PARAMATRE OLARAK KULLANDIK) JMP SBIZLE</p>
<p>ALT: ;YILAN HAREKETLERI MOV R5, #001H ;YILANIN BASINI BUL (BULUNACAK OLAN YE R5'E ATILMALIDIR) MOV R0, #040H BAS_ALT_ARA: MOV A,@R0 CJNE A, 005H, BAS_ALT_YOK JMP BAS_ALT_VAR BAS_ALT_YOK: INC R0 JMP BAS_ALT_ARA BAS_ALT_VAR: ;R0'IN ICERISINDE YILANIN BIYERI VAR. HAREKET_ALT: MOV @R0, #0FEH ; KOSELERE GELMIS MI KONTROLLERI (ALT) ; Her kose teker teker kontrol edilir ve yilanin duvardan gecmesi saglanir. ;DEGISECEK BASLA MOV A,#78H CJNE A, 00H, YOK78_ALT MOV R0, #40H JMP ALT_TAMAM YOK78_ALT: MOV A,#79H CJNE A, 00H, YOK79_ALT MOV R0, #41H JMP ALT_TAMAM YOK79_ALT: MOV A,#7AH CJNE A, 00H, YOK7A_ALT MOV R0, #42H JMP ALT_TAMAM YOK7A_ALT: MOV A,#7BH CJNE A, 00H, YOK7B_ALT MOV R0, #43H JMP ALT_TAMAM YOK7B_ALT: MOV A,#7CH CJNE A, 00H, YOK7C_ALT MOV R0, #44H JMP ALT_TAMAM YOK7C_ALT: MOV A,#7DH CJNE A, 00H, YOK7D_ALT MOV R0, #45H JMP ALT_TAMAM YOK7D_ALT: MOV A,#7EH CJNE A, 00H, YOK7E_ALT MOV R0, #46H JMP ALT_TAMAM YOK7E_ALT: MOV A,#7FH CJNE A, 00H, YOK7F_ALT MOV R0, #47H JMP ALT_TAMAM YOK7F_ALT: MOV A,R0 ADD A, #8H MOV R0,A ALT_TAMAM: ;OYUN SONU VE YILAN ELMA YEDI MI KONTROLU MOV A, @R0 JNZ ALT_BUYU JMP ALT_ILERI ALT_BUYU: CLR C SUBB A, #0FFH JNZ ALT_BITTI ;Yilanin boyunun 8 olmasi durumunda bir sirada yuruyebilmesinin saglanmasi amaciyla yazilmis bir dizi kod... MOV 010H, #0FFH ;BUYU BAYTINI SET ET JMP ALT_ILERI ALT_BITTI: MOV A, @R0 CLR C SUBB A, R6 JNZ ALT_CIDDEN_BITTI MOV 011H, #0FFH ;YILNAN TAM UCTA BAYTINI SET SET JMP ALT_ILERI</p>
<p>ALT_CIDDEN_BITTI: LJMP BITTI ALT_ILERI: MOV @R0, #001H</p>
<p>;DEGISECEK BITTI MOV R4, #002H ; BIR SONRAKI YILANIN YERI (SBIZLEYE PARAMATRE OLARAK KULLANDIK) JMP SBIZLE SBIZLE: ;BIR SONRAKI YILANIN YERI (R4 ILE SETTIRILIR) MOV 003H, 006H</p>
<p>MOV A, 11H JNZ SON_BASA_DENK_GELMIS JMP DONGU_BAS SON_BASA_DENK_GELMIS: DEC 003H</p>
<p>DONGU_BAS: DJNZ 003H, IZLE_DONGU SJMP IZLE_BITTI IZLE_DONGU: ;YILAN HAREKETLERI MOV R5, #0FEH ;YILANIN BIR YERINI BUL (BULUNACAK OLAN YE R5'E ATILMALIDIR) MOV R0, #040H IZLE_FE_ARA: MOV A,@R0 CJNE A, 005H, IZLE_FE_ARA_YOK JMP IZLE_FE_ARA_VAR IZLE_FE_ARA_YOK: INC R0 JMP IZLE_FE_ARA IZLE_FE_ARA_VAR: ;R0'DA FEhın yeri var MOV B,R0 ;YILAN HAREKETLERI MOV R5, 004H ; YILANIN DEGISECEK PARCASININ YERINI TESPIT ET MOV R0, #40H IZLE_DEGISECEK_ARA: MOV A,@R0 CJNE A, 005H, IZLE_DEGISECEK_ARA_YOK JMP IZLE_DEGISECEK_ARA_VAR IZLE_DEGISECEK_ARA_YOK: INC R0 JMP IZLE_DEGISECEK_ARA IZLE_DEGISECEK_ARA_VAR: ;R0'DA DEGISECEK ELEMANIN FE hın yeri var MOV @R0, #0FEH MOV R0,B MOV @R0, 004H INC R4 JMP DONGU_BAS</p>
<p>IZLE_BITTI:</p>
<p>;YILANIN SON ELEMANI ILE ILK ELEMANI CAKISMIS MI MOV A, 11H JNZ SON_BASA_DENK_GELMIS_2 JMP SONU_HALLET SON_BASA_DENK_GELMIS_2: MOV 11H,#00H ;;SON BASA GELMIS BITINI TEMIZLE</p>
<p>;YILAN HAREKETLERI MOV R5, #0FEH ;YILANIN BIR YERINI BUL (BULUNACAK OLAN YE R5'E ATILMALIDIR) MOV R0, #040H IZLE_SON_ARA: MOV A,@R0 CJNE A, 005H, IZLE_SON_ARA_YOK JMP IZLE_SON_ARA_VAR IZLE_SON_ARA_YOK: INC R0 JMP IZLE_SON_ARA IZLE_SON_ARA_VAR: ;R0'DA FEh'nin yeri var MOV @R0, 006H JMP SBIZLE_BITTI SONU_HALLET: ; YILAN HAREKET ETTIKTEN SONRA, EN SONDA KALACAK FE'YI KALDIRMAMIZ GEREKIR. ; BU KISIM BU ISLEMI YAPMAKTADIR.</p>
<p>MOV R5, #0FEH</p>
<p>;YILANIN BIR YERINI BUL (BULUNACAK OLAN YE R5'E ATILMALIDIR) MOV R0, #040H IZLE_FE_BITTI: MOV A,@R0 CJNE A, 005H, IZLE_FE_BITTI_YOK</p>
<p>JMP IZLE_FE_BITTI_VAR</p>
<p>IZLE_FE_BITTI_YOK: INC R0 JMP IZLE_FE_BITTI</p>
<p>IZLE_FE_BITTI_VAR: ;R0'DA FE'IN yeri var MOV A, 010H JNZ BUYUYECEK MOV @R0, #00h JMP SBIZLE_BITTI BUYUYECEK: MOV 010H, #00H ;YILAN UZAYACAK MI BAYTINI SIFIRLA MOV 009H, #00H ;ELMANIN BELLEKTEKI ADRESINI SIFIRLA KI TEKRAR YARATILSIN INC R6 ;YILANIN UZUNLUGUNU ARTIR MOV @R0, 006H ;BELLEK GORUNTUSUNDE YILANI UZAT JMP SBIZLE_BITTI SBIZLE_BITTI: LJMP BASLA</p>
<p>BITTI: DEC R6 DEC R6 MOV R0, 06H MOV R1, 06H MOV R2, 06H MOV R3, 06H MOV R4, 06H MOV R5, 06H MOV R6, 06H MOV R7, 06H MOV A, 06H MOV B, 06H END [/plain]</p>
</div></div></article><div class="card comments main-container__items"><div class="card__contents" id="disqus_thread"></div></div></div><div class="sidebar main-content__sidebar"><div class="about"><img class="about__image" src="/img/profile.jpg"/><h1 class="about__name">Umut Benzer</h1><h2 class="about__mini-bio">Software Engineer in Berlin</h2></div></div></div><div class="main-container"><div class="footer"><div class="footer__copyright-holder"><p><a href="http://creativecommons.org/licenses/by-nc-nd/4.0/" rel="license noopener noreferrer" target="_blank"><img alt="Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License" src="/img/cclicense.png"/></a></p><p><span>Bu sitedeki tüm yazı ve görseller </span><a href="http://creativecommons.org/licenses/by-nc-nd/4.0/" rel="license noopener noreferrer" target="_blank">Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License</a><span> ile lisanslanmıştır.</span></p></div><div class="footer__generator"><span>Bu sayfa </span><span>30 Nisan 2017</span><span> tarihinde </span><a href="https://github.com/ubenzer/fil" target="_blank">Fil</a><span> ile yaratılmıştır.</span></div></div></div></div>
        <script src="/app.js" type="text/javascript"></script><script type="text/javascript">
        var disqus_config = function () {
          this.page.url = "https://ubenzer.com/2010/05/makine-kodu-ile-red-alert-3-yazdik/";
          this.page.identifier = "post@/2010/05/makine-kodu-ile-red-alert-3-yazdik";
        };
        (function() {
          var d = document, s = d.createElement('script');
          s.src = 'https://ubenzer.disqus.com/embed.js';
          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
        </script><script type="text/javascript">
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-509698-8', 'auto');
      ga('send', 'pageview');
      </script>
      </body>
    </html>
  