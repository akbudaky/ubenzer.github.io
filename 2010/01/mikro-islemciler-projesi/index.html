<!doctype html>
    <html lang="tr">
      <head>
        <title>Mikro Ä°ÅŸlemciler Projesi - UBenzer</title>
        <meta content="utf-8" name="charset"/><meta content="width=device-width, initial-scale=1.0" name="viewport"/><meta content="#2196F3" name="theme-color"/>
        <link href="/template/ui.css" media="screen" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Roboto:400,400i,700,700i&amp;amp;subset=latin-ext" media="screen" rel="stylesheet" type="text/css"/><link href="/img/favicon/apple-touch-icon-57x57.png" rel="apple-touch-icon-precomposed" sizes="57x57"/><link href="/img/favicon/apple-touch-icon-60x60.png" rel="apple-touch-icon-precomposed" sizes="60x60"/><link href="/img/favicon/apple-touch-icon-72x72.png" rel="apple-touch-icon-precomposed" sizes="72x72"/><link href="/img/favicon/apple-touch-icon-76x76.png" rel="apple-touch-icon-precomposed" sizes="76x76"/><link href="/img/favicon/apple-touch-icon-114x114.png" rel="apple-touch-icon-precomposed" sizes="114x114"/><link href="/img/favicon/apple-touch-icon-120x120.png" rel="apple-touch-icon-precomposed" sizes="120x120"/><link href="/img/favicon/apple-touch-icon-152x152.png" rel="apple-touch-icon-precomposed" sizes="152x152"/><link href="/img/favicon/favicon-196x196.png" rel="icon" sizes="196x196"/><link href="/img/favicon/favicon-128x128.png" rel="icon" sizes="128x128"/><link href="/img/favicon/favicon-96x96.png" rel="icon" sizes="96x96"/><link href="/img/favicon/favicon-32x32.png" rel="icon" sizes="32x32"/><link href="/img/favicon/favicon-16x16.png" rel="icon" sizes="16x16"/>
      </head>
      <body>
        <div><header class="header"><div class="app-bar"><h1 class="app-bar__title"><a class="app-bar__title-link" href="/">UBenzer</a></h1></div></header><div class="main-container"><div class="main-content"><article class="card main-container__items"><div class="card__contents blog-post"><div class="blog-post__date">7 Ocak 2010</div><h1><a class="blog-post__title" href="/2010/01/mikro-islemciler-projesi">Mikro Ä°ÅŸlemciler Projesi</a></h1><div class="markdown-content blog-post__body blog-post__content"><p><a href="/2010/01/mikro-islemciler-projesi/8086.gif" target="_blank"><img src="/2010/01/mikro-islemciler-projesi/8086.gif" title="8086" alt="8086"></a>{left}Ege Ãœniversitesi Bilgisayar MÃ¼hendisliÄŸi 3. SÄ±nÄ±flar iÃ§in 4 Ocak 2010 Pazartesi gÃ¼nÃ¼ne verilen mikro Ã¶devi iÃ§in benim Ã§Ã¶zÃ¼mlerimi yazÄ±da bulabilirsiniz.</p>
<p>Projeyi yapmanÄ±n zor geldiÄŸini sÃ¶ylemeliyim en baÅŸta. <em>Oturup C yazar gibi ASM yazmak olacak iÅŸ deÄŸilmiÅŸ onu fark ettim.</em> BaktÄ±m, adÄ±m atamÄ±yorum, proje bana bakÄ±yor, ben projeye, dedim bu iÅŸ bÃ¶yle olmayacak.</p>
<p>AÃ§tÄ±m boÅŸ bir sayfa, Câ€™ye benzer ama C olmayan, benim <em>&quot;tarzanca&quot;</em> olarak adlandÄ±rdÄ±ÄŸÄ±m bir dil ile kodlarÄ± Ã¶nce anlayabileceÄŸim ÅŸekilde yazdÄ±m. Forâ€™lu ifâ€™li ÅŸekillerde, deÄŸiÅŸken kullanarak. Sonra ikinci defa kodlarÄ±n Ã¼stÃ¼nden geÃ§erek, bunlarÄ± ASMâ€™ye <em>â€œderledimâ€</em>.</p>
<p>BÃ¶yle yapÄ±nca, kendimi daha Ã¼st seviyeli bir dilde yazÄ±yor gibi hissettim kodlarÄ±. Projeye etkinlikten puan verilmeyecek olmasÄ± da bu isteÄŸimi gerÃ§ekleÅŸtirmemi saÄŸladÄ±. <em>(DÃ¶rdÃ¼ncÃ¼ Ã¶dev ne kadar sonsuz dÃ¶ngÃ¼ye giriyormuÅŸ gibi dursa da, emu8086â€™da Ã§alÄ±ÅŸtÄ±rÄ±rsanÄ±z 15 dakika sonra program bitiyor, doÄŸru da Ã§Ã¶zÃ¼yor. ğŸ˜„ )</em></p>
<p>KodlarÄ± emu8086 emulatÃ¶rÃ¼nÃ¼n <em>dÃ¶rdÃ¼ncÃ¼ sÃ¼rÃ¼mÃ¼nde</em> sorunsuzca Ã§alÄ±ÅŸtÄ±rabilirsiniz.</p>
<p>Gelgelim proje metnine ve Ã§Ã¶zÃ¼mlerimeâ€¦</p>
<ul>
<li><a href="/2010/01/mikro-islemciler-projesi/ege-mikro-proje.pdf" >Proje Metni</a></li>
<li><a href="/2010/01/mikro-islemciler-projesi/asm-proje1.7z" >Benim Ã‡Ã¶zÃ¼mlerim</a> <em>(4 ASM dosyasÄ±, sÄ±kÄ±ÅŸtÄ±rÄ±lmÄ±ÅŸ)</em></li>
</ul>
<p>EÄŸer kodlarÄ± indirmeden incelemek isterseniz yazÄ±nÄ±n devamÄ±na bakabilirsiniz.</p>
<h2>Ã–dev 1: Palindromlar</h2>
<p>Projenin ilk kÄ±smÄ±nda baÅŸlangÄ±Ã§ adresi SIâ€™da olan, data segmentteki bir metnin iÃ§indeki kelimelerin kaÃ§ tanesinin <a href="/2010/01/mikro-islemciler-projesi/2007/08/palindromlar" >palindrom</a> olduÄŸunun sayÄ±sÄ± isteniyordu. Benim kodumda bu sayÄ± CX registerÄ±ndan alÄ±nabilir.</p>
<p><em>DÄ°KKAT:</em> <em>Palindrom ASM'si bazen hatalÄ± sonuÃ§lar gÃ¶ndermekte olup</em>, Ã§alÄ±ÅŸmak iÃ§in kullanÄ±lmamasÄ± ÅŸiddetle Ã¶nerilir. HatayÄ± yakalayan olup da bana haber verirse Ã§ok mutlu olurum.</p>
<p>[plain] ; UMUT BENZER ; 05-06-7670 ; http://www.ubenzer.com/ ; SURUM 2 data segment character dw ? ; En son islenen karakterin pointerini tutar palindrom dw 0 ; Kac tane palindrom kelime bulundugunu tutar simdiki_cumlenin_karakter_sayisi dw 0 ; Process edilen kelimede kac harf oldugunu tutar. curr_palindrom db 0 ; Process edilen kelime palindromsa 0, degilse 1 cumle_baslangici dw ? ; Process edilen kelimenin baslangic pointeri karsilastirilacak dw ? ; Process edilen kelimede karsilastirilacak harf sayisi son_kelime_mi db 0 cumle db ' . A A. AA ABA ABBA ADA ADDA A A REM UMUT BENZER SCORPIONS BILMUH DENEME.DENEME DENEME DENEEEEME PALINDROM 123 121 DENEME ASA A $ DOLARDAN $ SONRA ABBA REM SCORPIONS VS.' ends</p>
<p>code segment start: MOV ax, data MOV ds, ax MOV es, ax MOV SI, OFFSET cumle MOV character, OFFSET SI enbas: MOV simdiki_cumlenin_karakter_sayisi, 0 MOV curr_palindrom, 0 MOV AX, character MOV cumle_baslangici, AX karakter_sayma_basladi: MOV BX, character MOV AX, SI[BX] SUB AL, '$' JZ son_kelime MOV AX, SI[BX] SUB AL, ' ' JZ karakter_sayma_bitti MOV AX, SI[BX] SUB AL, '.' JZ karakter_sayma_bitti INC simdiki_cumlenin_karakter_sayisi INC character; JMP karakter_sayma_basladi son_kelime: MOV son_kelime_mi, 1 MOV curr_palindrom, 1 karakter_sayma_bitti: MOV DX,0 MOV AX,simdiki_cumlenin_karakter_sayisi CMP AX,1 JNZ bir_karakter_degil INC palindrom INC character JMP karakter_sarma_basladi bir_karakter_degil: CMP AX,0 JNZ sifir_karakter_degil INC character; JMP karakter_sarma_basladi sifir_karakter_degil: MOV BX, 2 DIV BX MOV karsilastirilacak, AX ; for MOV CX, 0 palindrom_mu_dongusu: MOV BX, karsilastirilacak SUB BX,CX JZ palindrom_mu_dongusu_bitti ; if MOV BX, cumle_baslangici ADD BX, CX MOV AX, SI[BX] MOV BX, cumle_baslangici ADD BX, simdiki_cumlenin_karakter_sayisi SUB BX, 1 ; Ilk eleman 0.indis ile basladigi icin SUB BX, CX MOV DX, SI[BX] SUB AL, DL JZ palindrom_mu_dongusu_sonu MOV curr_palindrom, 1 MOV CX,karsilastirilacak DEC CX ;end if palindrom_mu_dongusu_sonu: INC CX JMP palindrom_mu_dongusu: palindrom_mu_dongusu_bitti: ; endfor MOV AL, curr_palindrom SUB AL, 0 JNZ palindrom_degil INC palindrom palindrom_degil: ;bitti mi kontrol bitti_mi_kontrol: MOV BL, son_kelime_mi SUB BL, 1 JZ bitirirken ;bitmediyse bir sonraki kelimenin basina gidelim. karakter_sarma_basladi: MOV BX, character MOV AX, SI[BX] SUB AL, ' ' JZ karakter_sar MOV AX, SI[BX] SUB AL, '.' JZ karakter_sar</p>
<p>JMP enbas karakter_sar: INC character; JMP karakter_sarma_basladi bitirirken: MOV CX, palindrom MOV ax, 4c00h ; exit to operating system. INT 21h ends</p>
<p>end start ; set entry point and stop the assembler. [/plain]</p>
<h2>Ã–dev 2: EKOK</h2>
<p>Verilen iki sayÄ±nÄ±n en kÃ¼Ã§Ã¼k ortak katÄ±nÄ±n bulunmasÄ± isteniyordu. <em>(EKOK, LCM)</em> Benim kodumda bu deÄŸer BX registerÄ±ndan alÄ±nabilir. Bu kodda prosedÃ¼r Ã§aÄŸrÄ±lmasÄ± ve recursiona <em>(Ã¶z yineleme)</em> Ã¶rnek bulunabilir.</p>
<p>[plain] ; Umut Benzer ; 05-06-7670 ; http://www.ubenzer.com/ data segment sayi1 dw 200 sayi2 dw 70 ends</p>
<p>stack segment dw 128 dup(0) ends</p>
<p>code segment gcd proc ; PARAMETRELER AX VE BX'ten alinip, sonuc BX'te verilir. CMP BX,0 JNE bx_sifir_degil MOV BX, AX RET bx_sifir_degil: MOV CX,BX MOV DX,0 DIV BX MOV BX,DX MOV AX,CX CALL gcd RET endp start: MOV AX, data MOV DS, AX MOV ES, AX</p>
<p>; LCM = sayi1 * sayi2 / GCD(a,b)</p>
<p>MOV AX, sayi1 MOV BX, sayi2 CMP AX, BX JG a_buyuk_b: ; Eger BX AX'ten buyukse yerlerini degistirelim. MOV CX,BX MOV BX,AX MOV AX,CX a_buyuk_b: PUSH AX PUSH BX CALL gcd POP AX POP CX MUL CX DIV BX MOV BX,AX MOV AX, 4c00h INT 21h ends</p>
<p>end start [/plain]</p>
<h2>Ã–dev 3: Faktoriyel</h2>
<p>Projenin Ã¼Ã§Ã¼ncÃ¼ kÄ±smÄ±nda recursion kullanarak verilen bir sayÄ±nÄ±n ASMâ€™de bulunmasÄ± isteniyordu. Benim Ã¶devimde sonuÃ§ CXâ€™ten alÄ±nabilir. Bu Ã¶dev 16 bitâ€™ten daha bÃ¼yÃ¼k sonuÃ§larÄ± doÄŸru gÃ¶rÃ¼ntÃ¼lemez.</p>
<p>[plain] ; Umut Benzer ; 05-06-7670 ; http://www.ubenzer.com/ data segment sayi dw 0 ends</p>
<p>stack segment dw 128 dup(0) ends code segment faktoriyel proc ; 0 faktoriyel ozel durumu CMP AX, 0 JNE sifir_diil MOV BX, 1 RET ; 1 faktoriyel base durum sifir_diil: CMP AX, 1 JNE bir_diil MOV BX, 1 RET ; Diger durumlar bir_diil: PUSH AX DEC AX CALL OFFSET faktoriyel POP AX MUL BX MOV BX,AX RET endp</p>
<p>start: MOV AX, data MOV DS, AX MOV ES, AX</p>
<p>MOV AX, sayi MOV CX, OFFSET faktoriyel CALL CX MOV CX, BX ; Sonuc BX ve CX'tedir. ; Program 16'bitten buyuk sonuclari dogru goruntuleyemez.</p>
<p>MOV AX, 4c00h int 21h ends end start [/plain]</p>
<h2>Ã–dev 4: Parity Bitleri</h2>
<p>Bu Ã¶devde 100 baytlÄ±k bir tablonun <em>(sÃ¼tunlar bitler, satÄ±rlar baytlar)</em> even parity bitlerinin bulunmasÄ± isteniyordu. Bu kod aÅŸÄ±rÄ± uzun olmasÄ±na ve Ã§ok aÅŸÄ±rÄ± uzun sÃ¼rede Ã§alÄ±ÅŸmasÄ±na raÄŸmen doÄŸru bir hesaplama yapmakta olup, hem dikey hem yatay parityleri doÄŸru bir ÅŸekilde hesaplamaktadÄ±r. SonuÃ§, ilgili bellek bÃ¶lgesindeki deÄŸiÅŸiklikler izlenerek gÃ¶rÃ¼lebilir.</p>
<p><em>DÄ°KKAT:</em> <em>Bu ASM etkin deÄŸildir ve Ã§ok daha kÄ±sa sÃ¼rede Ã§alÄ±ÅŸabilecek kodlar yazÄ±labilir.</em> SonuÃ§ doÄŸru olmakla beraber bu kodun dikkate alÄ±nÄ±p Ã¼zerinde Ã§alÄ±ÅŸÄ±lmamasÄ±nÄ± ÅŸiddetle Ã¶neririm.</p>
<p>[plain] data segment ;bilgiler db 100 DUP(11111111B) bilgiler db 11110111B,01011110B,01011010B,10001000B,11111010B,11111111B,00000000B,10101000B,00101111B,01111010B, 90 DUP(11111111B), ? sayi equ 100 i db ? parity db 0 ends</p>
<p>stack segment dw 128 dup(0) ends</p>
<p>code segment get_mask proc CMP CH,0 JNE sifir_degil MOV DL, 10000000B ;MASK sifir_degil: CMP CH,1 JNE bir_degil MOV DL, 01000000B ;MASK bir_degil: CMP CH,2 JNE iki_degil MOV DL, 00100000B ;MASK iki_degil: CMP CH,3 JNE uc_degil MOV DL, 00010000B ;MASK uc_degil: CMP CH,4 JNE dort_degil MOV DL, 00001000B ;MASK dort_degil: CMP CH,5 JNE bes_degil MOV DL, 00000100B ;MASK bes_degil: CMP CH,6 JNE alti_degil MOV DL, 00000010B ;MASK alti_degil: CMP CH,7 JNE yedi_degil MOV DL, 00000001B ;MASK yedi_degil: RET endp</p>
<p>start: mov ax, data mov ds, ax mov es, ax ; Once ROW parity bitleri ; for baslangici MOV CL, 0 satir_gezintisi: CMP CL, sayi ; DONGU SAYISI JE satir_gezintisi_bitti MOV i,CL ; for baslangici MOV SI, OFFSET bilgiler MOV CH,0 ADD SI, CX MOV AL, DS:[SI] ; Siradaki kelimeyi getir MOV parity, 0 ; ikinci for baslangici MOV CH, 0 ic_satir_gezintisi: CMP CH,7 JE ic_satir_gezintisi_bitti ; for baslangici CALL get_mask ; Birinci karakter kontrolu AND AL,11111110B MOV BL,AL AND BL, DL ; APPLY MASK SUB BL, 0 JZ problem_yok ; Partiye gelecek olan degeri tersine cevir MOV BH,parity SUB BH,0 JNZ sifir_yap: MOV parity,1 JMP devam sifir_yap: MOV parity,0 devam: problem_yok: ; for sonu INC CH JMP ic_satir_gezintisi ic_satir_gezintisi_bitti: ; for sonu OR AL, parity MOV DS:[SI],AL</p>
<p>; for sonu MOV CL,i INC CL JMP satir_gezintisi satir_gezintisi_bitti: ; for sonu ; COLUMN parity bitleri MOV SI, OFFSET bilgiler MOV BX, sayi ; DONGU SAYISI ADD SI, BX MOV DS:[SI],0 ; Siradaki kelimeyi getir ; for baslangici MOV CH, 0 sutun_gezintisi: CMP CH, 8 JE sutun_gezintisi_bitti</p>
<p>; for baslangici MOV parity, 1 ; ikinci for baslangici MOV CL, 0 ic_sutun_gezintisi: CMP CL, sayi ; DONGU SAYISI JE ic_sutun_gezintisi_bitti MOV i,CL ; for baslangici MOV SI, OFFSET bilgiler MOV BL,CL MOV BH,0 ADD SI, BX MOV AL, DS:[SI] ; Siradaki kelimeyi getir CALL get_mask ; Birinci karakter kontrolu MOV BL, AL AND BL, DL ; APPLY MASK SUB BL, 0 JZ problem_yok_sutun ; Partiye gelecek olan degeri tersine cevir MOV BH,parity SUB BH,0 JNZ sifir_yap_sutun: MOV parity,1 JMP devam_sutun sifir_yap_sutun: MOV parity,0 devam_sutun: problem_yok_sutun: ; for sonu MOV CL,i INC CL JMP ic_sutun_gezintisi ic_sutun_gezintisi_bitti: ; for sonu CMP parity,0 JNE degisiklik_gerekli_degil MOV SI, OFFSET bilgiler MOV BX, sayi ADD SI, BX OR DS:[SI],DL degisiklik_gerekli_degil:</p>
<p>; for sonu INC CH JMP sutun_gezintisi sutun_gezintisi_bitti: ; for sonu MOV ax, 4C00H ; exit to operating system. int 21H ends</p>
<p>end start ; set entry point and stop the assembler. [/plain]</p>
<p>Ä°yi gÃ¼nler</p>
</div></div></article><div class="card comments main-container__items"><div class="card__contents" id="disqus_thread"></div></div></div><div class="sidebar main-content__sidebar"><div class="about"><img class="about__image" src="/img/profile.jpg"/><h1 class="about__name">Umut Benzer</h1><h2 class="about__mini-bio">Software Engineer in Berlin</h2></div></div></div><div class="main-container"><div class="footer"><div class="footer__copyright-holder"><p><a href="http://creativecommons.org/licenses/by-nc-nd/4.0/" rel="license noopener noreferrer" target="_blank"><img alt="Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License" src="/img/cclicense.png"/></a></p><p><span>Bu sitedeki tÃ¼m yazÄ± ve gÃ¶rsellerÂ </span><a href="http://creativecommons.org/licenses/by-nc-nd/4.0/" rel="license noopener noreferrer" target="_blank">Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License</a><span>Â ile lisanslanmÄ±ÅŸtÄ±r.</span></p></div><div class="footer__generator"><span>Bu sayfaÂ </span><span>18 Nisan 2017</span><span>Â tarihindeÂ </span><a href="https://github.com/ubenzer/fil" target="_blank">Fil</a><span>Â ile yaratÄ±lmÄ±ÅŸtÄ±r.</span></div></div></div></div>
        <script src="/template/app.js" type="text/javascript"></script><script type="text/javascript">
        var disqus_config = function () {
          this.page.url = "https://ubenzer.com/2010/01/mikro-islemciler-projesi";
          this.page.identifier = "post@/2010/01/mikro-islemciler-projesi";
        };
        (function() {
          var d = document, s = d.createElement('script');
          s.src = 'https://ubenzer.disqus.com/embed.js';
          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
        </script><script type="text/javascript">
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-509698-8', 'auto');
      ga('send', 'pageview');
      </script>
      </body>
    </html>
  