<!doctype html>
    <html lang="tr">
      <head>
        <title>Ödev 4: Doğrudan Erişimli Dosyalarda Hashing ve Bağlaçlı Liste Yaklaşımı - UBenzer</title>
        <meta content="utf-8" name="charset"/><meta content="width=device-width, initial-scale=1.0" name="viewport"/><meta content="#2196F3" name="theme-color"/><meta content="14 Nisan 2008 tarihinde aldığımız, daha adından acılı bir ödev olacağı belli olan Doğrudan Erişimli Dosyalarda Hashing ve Bağlaçlı Liste Yaklaşımı ödevi için teslim ettiğim kaynak kod. Ödevde Vecdi Hoca’nın Ayrık’ta anlattığı Recursive (kendini çağıran fonksiyon) Algorithm kullanmayı denedim. Ödev zaten karışıktı, iyice karıştı ve ben programın yazarı olarak bile neyin ne işe yaradığını bazen anlayamıyorum. Ama buna rağmen programda hata göremedim, sorunsuz gibi gibi geldi bana." name="description"/><meta content="article" property="og:type"/><meta content="106731154350" property="fb:app_id"/><meta content="tr_TR" property="og:locale"/><meta content="https://ubenzer.com/2008/04/odev-4-dogrudan-erisimli-dosyalarda-hashing-ve-baglacli-liste-yaklasimi/" property="og:url"/><meta content="Ödev 4: Doğrudan Erişimli Dosyalarda Hashing ve Bağlaçlı Liste Yaklaşımı" property="og:title"/><meta content="14 Nisan 2008 tarihinde aldığımız, daha adından acılı bir ödev olacağı belli olan Doğrudan Erişimli Dosyalarda Hashing ve Bağlaçlı Liste Yaklaşımı ödevi için teslim ettiğim kaynak kod. Ödevde Vecdi Hoca’nın Ayrık’ta anlattığı Recursive (kendini çağıran fonksiyon) Algorithm kullanmayı denedim. Ödev zaten karışıktı, iyice karıştı ve ben programın yazarı olarak bile neyin ne işe yaradığını bazen anlayamıyorum. Ama buna rağmen programda hata göremedim, sorunsuz gibi gibi geldi bana." property="og:description"/>
        <link href="/ui.css" media="screen" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Roboto:400,400i,700,700i&amp;amp;subset=latin-ext" media="screen" rel="stylesheet" type="text/css"/><link href="/static/img/favicon/apple-touch-icon-57x57.png" rel="apple-touch-icon-precomposed" sizes="57x57"/><link href="/static/img/favicon/apple-touch-icon-60x60.png" rel="apple-touch-icon-precomposed" sizes="60x60"/><link href="/static/img/favicon/apple-touch-icon-72x72.png" rel="apple-touch-icon-precomposed" sizes="72x72"/><link href="/static/img/favicon/apple-touch-icon-76x76.png" rel="apple-touch-icon-precomposed" sizes="76x76"/><link href="/static/img/favicon/apple-touch-icon-114x114.png" rel="apple-touch-icon-precomposed" sizes="114x114"/><link href="/static/img/favicon/apple-touch-icon-120x120.png" rel="apple-touch-icon-precomposed" sizes="120x120"/><link href="/static/img/favicon/apple-touch-icon-152x152.png" rel="apple-touch-icon-precomposed" sizes="152x152"/><link href="/static/img/favicon/favicon-196x196.png" rel="icon" sizes="196x196"/><link href="/static/img/favicon/favicon-128x128.png" rel="icon" sizes="128x128"/><link href="/static/img/favicon/favicon-96x96.png" rel="icon" sizes="96x96"/><link href="/static/img/favicon/favicon-32x32.png" rel="icon" sizes="32x32"/><link href="/static/img/favicon/favicon-16x16.png" rel="icon" sizes="16x16"/><link href="https://ubenzer.com/2008/04/odev-4-dogrudan-erisimli-dosyalarda-hashing-ve-baglacli-liste-yaklasimi/" rel="canonical"/>
      </head>
      <body>
        <div><header class="header"><div class="app-bar"><h1 class="app-bar__title"><a class="app-bar__title-link" href="/">UBenzer</a></h1></div></header><div class="main-container"><div class="main-content"><article class="card main-container__items"><div class="card__contents blog-post"><div class="blog-post__date">26 Nisan 2008</div><h1><a class="blog-post__title" href="/2008/04/odev-4-dogrudan-erisimli-dosyalarda-hashing-ve-baglacli-liste-yaklasimi/">Ödev 4: Doğrudan Erişimli Dosyalarda Hashing ve Bağlaçlı Liste Yaklaşımı</a></h1><div class="markdown-content blog-post__body blog-post__content"><p>14 Nisan 2008 tarihinde aldığımız, daha adından acılı bir ödev olacağı belli olan <em>Doğrudan Erişimli Dosyalarda Hashing ve Bağlaçlı Liste Yaklaşımı</em> ödevi için teslim ettiğim kaynak kod. Ödevde <em>Vecdi Hoca</em>’nın <em>Ayrık</em>’ta anlattığı <em>Recursive</em> (kendini çağıran fonksiyon) <em>Algorithm</em> kullanmayı denedim. Ödev zaten karışıktı, iyice karıştı ve ben programın yazarı olarak bile neyin ne işe yaradığını bazen anlayamıyorum. Ama buna rağmen programda hata göremedim, sorunsuz gibi gibi geldi bana.</p>
<p><em>Not:</em> Ödevim içinde kaç tane fseek, fwrite fread var ben bile sayamadım. 😃 <em>Not 2:</em> Ne zaman algoritma ödev kağıtlarındaki</p>
<blockquote>
<p>“Ödevin değerlendirmesinde; programın doğru ve eksiksiz çalışmasının yanında etkinlik, yapısal ve modüler programlama ilkelerine uygunluk <em>ta</em> dikkate alınacaktır. Global değişken kullanılmaması ve fonksiyon kullanımı özellikle önemlidir.”</p>
</blockquote>
<p><em>ta</em> kelimesi (?) fark edilip düzeltilecek bir buçuk dönemdir heyecanla beklemekteyim.</p>
<ul>
<li><a href="/2008/04/odev-4-dogrudan-erisimli-dosyalarda-hashing-ve-baglacli-liste-yaklasimi/odev-4.zip" >Ödev Açıklaması</a></li>
<li><a href="/2008/04/odev-4-dogrudan-erisimli-dosyalarda-hashing-ve-baglacli-liste-yaklasimi/76701.c" >Benim Çözümüm (7670.c)</a></li>
</ul>
<p>Kaynak kodunu incelemek ve fikir sahibi olmak amacıyla kullanabilirsiniz. Ama lütfen kaynak kodunu kopyala yapıştır yapmayalım, kendimize mal etmeyelim. Onun yerine nasıl çalıştığını inceleyip kavrama yoluna gidelim.</p>
<p>Sınav dönemine geldik. Haydi hayırlısı.</p>
<p>Kaynak kodunu indirmek istemezseniz, bir kopyasına aşağıdan ulaşabilisiniz.</p>
<pre><code class="hljs language-c"> <span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;#include&lt;stdlib.h&gt;&lt;/stdlib.h&gt;&lt;/stdio.h&gt;</span></span>

<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> URUN_NO_MIN 1 #<span class="hljs-meta-keyword">define</span> KAYIT_SAY 100 #<span class="hljs-meta-keyword">define</span> STOK_LIMIT_MIN 0 #<span class="hljs-meta-keyword">define</span> ALIS_FIYAT_MIN 0 #<span class="hljs-meta-keyword">define</span> LINK_AYNI -2 #<span class="hljs-meta-keyword">define</span> LINK_GONDER -3</span>

<span class="hljs-comment">/* Sabitler ve Anlamlari */</span> <span class="hljs-comment">/* --------------------- */</span> <span class="hljs-comment">/* URUN_NO_MIN : Ürün numarasının alabileceği en düşük değer. (negatif değeler özel parametre- lere karşılık gelebileceği için tercih edilmemelidir.) KAYIT_SAY : Hash fonksiyonu ile gidilecek, ilk başta yaratılan kısım. Bu değer oynanarak ilk başta ne kadar boş kayıt olacağı değiştirilebilir. DİKKAT: Dosyalar yaratıldıktan sonra bunu değiştirmeniz sorun çıkartır. STOK_LIMIT_MIN : Stok değerinin alabileceği minimum değerdir. Programda depoda olmayan bir ürünün satılamayacağı düşünülerek bu sabit 0 alınmıştır. Ancak stok değerinin - değer- lere de düşmesi isteniyorsa bu değer değiştirilebilir. ALIS_FIYAT_MIN : Birim alış/satış fiyatlarının alabileceği minimum değeri belirler. Bir ürünün en fazla bedava satılacağı (o da nedense) düşünülmüş ve programda 0 ayarlanmıştır. Ama eğer ürünü satıp üstüne de para verilmesi isteniyorsa bu değişken her türlü sayı yapılabilir. LINK_AYNI : urun_duzenle fonksiyonuna değiştirilen girdideki link değerinin değiştirilmemesi gerektiğini söyleyen sembolik sabittir. LINK_GONDER : urun_duzenle fonksiyonuna gönderildiğinde fonksyinonun urun_kodu ile gönderilen ürüne ait link değerini geri döndürmesini sağlar.

*/</span>

<span class="hljs-comment">/* Yapılar */</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">URUN_YAPI</span> {</span> <span class="hljs-keyword">int</span> urun_kodu; <span class="hljs-keyword">char</span> urun_adi[<span class="hljs-number">20</span>]; <span class="hljs-keyword">float</span> birim_alis_fiyati; <span class="hljs-keyword">int</span> stok_miktari; <span class="hljs-keyword">int</span> sonraki; <span class="hljs-keyword">int</span> link; };

<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">SATIS_YAPI</span> {</span> <span class="hljs-keyword">char</span> fatura_no[<span class="hljs-number">6</span>]; <span class="hljs-keyword">char</span> satis_tarihi[<span class="hljs-number">6</span>]; <span class="hljs-keyword">int</span> satis_miktari; <span class="hljs-keyword">float</span> birim_satis_fiyati; <span class="hljs-keyword">int</span> sonraki; };

<span class="hljs-comment">/* Kullanıcı tanımlı tipler */</span> <span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">URUN_YAPI</span> <span class="hljs-title">URUN</span>;</span> <span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">SATIS_YAPI</span> <span class="hljs-title">SATIS</span>;</span>

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">beklet</span><span class="hljs-params">()</span> </span>{ <span class="hljs-comment">/* Bu fonksiyonun tek amaci kullaniciyi bir tusa basana kadar bekletmek, ve sonra ekrani silmektir. */</span> <span class="hljs-built_in">printf</span>(<span class="hljs-string">"\nDevam etmek icin bir tusa basin."</span>); getche(); system (<span class="hljs-string">"cls"</span>); }

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">hash</span><span class="hljs-params">(<span class="hljs-keyword">int</span> urun_kodu)</span> </span>{ <span class="hljs-keyword">return</span> (urun_kodu % KAYIT_SAY) + <span class="hljs-number">1</span>; }

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">urun_var_mi</span><span class="hljs-params">(<span class="hljs-keyword">int</span> urun_kodu,<span class="hljs-keyword">int</span> kayit_no, <span class="hljs-keyword">int</span> link_yolla)</span> </span>{

<span class="hljs-comment">/* Ürünün olup olmadığını kontrol eder. Aşağıdaki değerlerden birini dönüdürür. */</span>

<span class="hljs-comment">/* 0: Urun yok. */</span> <span class="hljs-comment">/* -1: Dosya açılamadı. */</span> <span class="hljs-comment">/* -2: Urun var. */</span>

FILE *fp; URUN oku;

<span class="hljs-keyword">if</span> ((fp=fopen (<span class="hljs-string">"urunler.dat"</span>,<span class="hljs-string">"rb+"</span>))== <span class="hljs-literal">NULL</span>) { <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Urunler.dat acilamadi. Gidiyorum ben."</span>); <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>; }

<span class="hljs-keyword">if</span> (kayit_no == <span class="hljs-number">-1</span>) { <span class="hljs-comment">/* Eğer fonksiyona ilk defa geldiysek hash ile asıl kaydı kontrol etmeliyiz. */</span> fseek(fp,(hash(urun_kodu) - <span class="hljs-number">1</span>) * <span class="hljs-keyword">sizeof</span>(URUN),<span class="hljs-number">0</span>); } <span class="hljs-keyword">else</span> { fseek(fp,(kayit_no) * <span class="hljs-keyword">sizeof</span>(URUN),<span class="hljs-number">0</span>); <span class="hljs-comment">/* Eğer fonksiyon kendini çağırdıysa dosya sonuna gidip bağlayacağız. */</span> }

fread(&amp;oku,<span class="hljs-keyword">sizeof</span>(URUN),<span class="hljs-number">1</span>,fp);

<span class="hljs-keyword">if</span> (oku.urun_kodu == urun_kodu) {

fclose(fp); <span class="hljs-keyword">if</span> (link_yolla == <span class="hljs-number">0</span>) { <span class="hljs-comment">/* Eğer link numarasını gönderme parametresiyse çağrıldıysa */</span> <span class="hljs-keyword">return</span> oku.link; } <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> <span class="hljs-number">-2</span>; } }

<span class="hljs-keyword">if</span> (oku.urun_kodu == <span class="hljs-number">-1</span>) { fclose(fp); <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; } <span class="hljs-keyword">else</span> { <span class="hljs-keyword">if</span> (oku.sonraki == <span class="hljs-number">-1</span>) { fclose(fp); <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; } <span class="hljs-keyword">else</span> { fclose(fp); <span class="hljs-keyword">return</span> urun_var_mi(urun_kodu, oku.sonraki, link_yolla); } } }

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">urun_ekle</span><span class="hljs-params">(<span class="hljs-keyword">int</span> urun_kodu, <span class="hljs-keyword">char</span> urun_adi[<span class="hljs-number">20</span>], <span class="hljs-keyword">float</span> birim_alis_fiyati, <span class="hljs-keyword">int</span> stok_miktari, <span class="hljs-keyword">int</span> kayit_no)</span> </span>{

<span class="hljs-comment">/* Adı üstünde: Ürün ekler */</span> <span class="hljs-comment">/* 0: Başarılı. */</span> <span class="hljs-comment">/* -1: Dosya açılamadı. */</span>

FILE *fp; URUN oku; <span class="hljs-keyword">int</span> sayac; <span class="hljs-keyword">int</span> gecici_konum;

<span class="hljs-keyword">if</span> ((fp=fopen (<span class="hljs-string">"urunler.dat"</span>,<span class="hljs-string">"rb+"</span>))== <span class="hljs-literal">NULL</span>) { <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Urunler.dat acilamadi. Gidiyorum ben."</span>); <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>; }

<span class="hljs-keyword">if</span> (kayit_no == <span class="hljs-number">-1</span>) { <span class="hljs-comment">/* Eğer fonksiyona ilk defa geliysek hash ile asıl kaydı kontrol etmeliyiz. */</span> fseek(fp,(hash(urun_kodu) - <span class="hljs-number">1</span>) * <span class="hljs-keyword">sizeof</span>(URUN),<span class="hljs-number">0</span>); } <span class="hljs-keyword">else</span> { fseek(fp,kayit_no * <span class="hljs-keyword">sizeof</span>(URUN),<span class="hljs-number">0</span>); <span class="hljs-comment">/* Eğer fonksiyon kendini çağırdıysa dosya sonuna gidip bağlayacağız. */</span> }

fread(&amp;oku,<span class="hljs-keyword">sizeof</span>(URUN),<span class="hljs-number">1</span>,fp);

<span class="hljs-keyword">if</span> (oku.urun_kodu == <span class="hljs-number">-1</span>) { <span class="hljs-comment">/* Burası boş, yazabiliriz. */</span>

<span class="hljs-comment">/* Gerekli atamalar */</span> oku.urun_kodu = urun_kodu;

<span class="hljs-keyword">for</span> (sayac=<span class="hljs-number">0</span>;sayac&lt;<span class="hljs-number">20</span>;sayac++) { oku.urun_adi[sayac] = urun_adi[sayac]; }

oku.birim_alis_fiyati = birim_alis_fiyati; oku.stok_miktari = stok_miktari; oku.sonraki = <span class="hljs-number">-1</span>; oku.link = <span class="hljs-number">-1</span>;

fseek(fp,-<span class="hljs-keyword">sizeof</span>(URUN),<span class="hljs-number">1</span>); <span class="hljs-comment">// Denetlemek için ileri gitmiştik, dön geri. fwrite(&amp;oku,sizeof(URUN),1,fp); // ve büyülü satır... fclose(fp);</span>

} <span class="hljs-keyword">else</span> { <span class="hljs-comment">/* Bu kayıt dolu, hadi başka bulalım. */</span>

<span class="hljs-comment">/* Eğer bu kayıt bağlı listenin son kaydıysa bu kaydı sonraki kısmını değiştirerek yeniden yaz. */</span> <span class="hljs-keyword">if</span> (oku.sonraki == <span class="hljs-number">-1</span>) { gecici_konum = ftell(fp); fseek(fp,<span class="hljs-number">0</span>,<span class="hljs-number">2</span>); oku.sonraki = ftell(fp)/<span class="hljs-keyword">sizeof</span>(URUN); fseek(fp,gecici_konum,<span class="hljs-number">0</span>);

fseek(fp,-<span class="hljs-keyword">sizeof</span>(URUN),<span class="hljs-number">1</span>); fwrite(&amp;oku,<span class="hljs-keyword">sizeof</span>(URUN),<span class="hljs-number">1</span>,fp);

<span class="hljs-comment">/* Sonra yeni ekleneceği ekleyelim. */</span> fseek(fp,<span class="hljs-number">0</span>,<span class="hljs-number">2</span>); oku.sonraki = <span class="hljs-number">-1</span>; oku.link = <span class="hljs-number">-1</span>; oku.birim_alis_fiyati = birim_alis_fiyati; oku.stok_miktari = stok_miktari; oku.urun_kodu = urun_kodu; <span class="hljs-keyword">for</span> (sayac=<span class="hljs-number">0</span>;sayac&lt;<span class="hljs-number">20</span>;sayac++) { oku.urun_adi[sayac] = urun_adi[sayac]; }

fwrite(&amp;oku,<span class="hljs-keyword">sizeof</span>(URUN),<span class="hljs-number">1</span>,fp); fclose(fp);

} <span class="hljs-keyword">else</span> { <span class="hljs-comment">/* eğer bağlı listenin son elemanı değilse onu bulana kadar aynı algoritmayı tekrarla */</span> fclose(fp); <span class="hljs-keyword">return</span> urun_ekle(urun_kodu, urun_adi[<span class="hljs-number">20</span>], birim_alis_fiyati, stok_miktari, oku.sonraki); } }

<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; }

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">urun_guncelle</span><span class="hljs-params">(<span class="hljs-keyword">int</span> urun_kodu, <span class="hljs-keyword">float</span> birim_alis_fiyati, <span class="hljs-keyword">int</span> stok_miktari, <span class="hljs-keyword">int</span> kayit_no, <span class="hljs-keyword">int</span> link)</span> </span>{

<span class="hljs-comment">/* 0: Başarılı. */</span> <span class="hljs-comment">/* -1: Dosya açılamadı. */</span>

FILE *fp; URUN oku;

<span class="hljs-keyword">if</span> ((fp=fopen (<span class="hljs-string">"urunler.dat"</span>,<span class="hljs-string">"rb+"</span>))== <span class="hljs-literal">NULL</span>) { <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Urunler.dat acilamadi. Gidiyorum ben."</span>); <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>; }

<span class="hljs-keyword">if</span> (kayit_no == <span class="hljs-number">-1</span>) { <span class="hljs-comment">/* Eğer fonksiyona ilk defa geliysek hash ile asıl kaydı kontrol etmeliyiz. */</span> fseek(fp,(hash(urun_kodu) - <span class="hljs-number">1</span>) * <span class="hljs-keyword">sizeof</span>(URUN),<span class="hljs-number">0</span>); } <span class="hljs-keyword">else</span> { fseek(fp,kayit_no * <span class="hljs-keyword">sizeof</span>(URUN),<span class="hljs-number">0</span>); <span class="hljs-comment">/* Eğer fonksiyon kendini çağırdıysa dosya sonuna gidip bağlayacağız. */</span> }

fread(&amp;oku,<span class="hljs-keyword">sizeof</span>(URUN),<span class="hljs-number">1</span>,fp);

<span class="hljs-keyword">if</span> (oku.urun_kodu == urun_kodu) { <span class="hljs-comment">/* İşte düzenlenecek ürünümüzü bulduk, mutluyuz biz. :) */</span>

<span class="hljs-keyword">if</span> (link == LINK_GONDER) {

fclose(fp); <span class="hljs-keyword">return</span> oku.link;

} <span class="hljs-keyword">else</span> {

<span class="hljs-keyword">if</span> (birim_alis_fiyati != ALIS_FIYAT_MIN - <span class="hljs-number">1</span>) { oku.birim_alis_fiyati = birim_alis_fiyati; }

<span class="hljs-keyword">if</span> (stok_miktari != STOK_LIMIT_MIN - <span class="hljs-number">1</span>) { oku.stok_miktari = stok_miktari; }

<span class="hljs-keyword">if</span> (link != LINK_AYNI) { oku.link = link; }

fseek(fp,-<span class="hljs-keyword">sizeof</span>(URUN),<span class="hljs-number">1</span>); <span class="hljs-comment">// Denetlemek için ileri gitmiştik, dön geri. fwrite(&amp;oku,sizeof(URUN),1,fp); // ve büyülü satır... fclose(fp);</span>

}

} <span class="hljs-keyword">else</span> { <span class="hljs-comment">/* Bu kayıt dolu, hadi başka bulalım. */</span> fclose(fp); <span class="hljs-keyword">return</span> urun_guncelle(urun_kodu, birim_alis_fiyati, stok_miktari, oku.sonraki, link); }

<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; }

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">satis_ekle</span><span class="hljs-params">(<span class="hljs-keyword">int</span> urun_kodu, <span class="hljs-keyword">char</span> fatura_no[<span class="hljs-number">6</span>], <span class="hljs-keyword">char</span> satis_tarihi[<span class="hljs-number">6</span>], <span class="hljs-keyword">int</span> satis_miktari, <span class="hljs-keyword">float</span> birim_satis_fiyati, <span class="hljs-keyword">int</span> sonraki, <span class="hljs-keyword">int</span> simdiki)</span> </span>{

<span class="hljs-comment">/* 0: Sorunsuz tamam */</span> <span class="hljs-comment">/* -1: Dosya hatası */</span>

FILE *fp; SATIS oku; <span class="hljs-keyword">int</span> link_konum; <span class="hljs-keyword">int</span> sayac;

<span class="hljs-comment">/* Önce urune bakalım... Eğer üründeki link -1 ise bu ürüne daha önce satış eklenmemiştir ki, ilk olduğu için işimiz çoooook basit olur. */</span>

<span class="hljs-keyword">if</span> (sonraki == <span class="hljs-number">-2</span>) { <span class="hljs-comment">/* Eğer fonksiyon kendini çağırmadıysa */</span>

link_konum = urun_var_mi(urun_kodu,<span class="hljs-number">-1</span>,<span class="hljs-number">0</span>); <span class="hljs-keyword">if</span> (link_konum == <span class="hljs-number">-1</span>) { <span class="hljs-comment">/* O zaman linki yaratacağız. */</span>

<span class="hljs-keyword">if</span> ((fp=fopen (<span class="hljs-string">"satislar.dat"</span>,<span class="hljs-string">"rb+"</span>))== <span class="hljs-literal">NULL</span>) { <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>; }

fseek(fp,<span class="hljs-number">0</span>,<span class="hljs-number">2</span>); <span class="hljs-comment">/* Dosya sonuna uç, ciiiik */</span> link_konum = (ftell(fp) / <span class="hljs-keyword">sizeof</span>(SATIS)) + <span class="hljs-number">1</span>;

<span class="hljs-keyword">for</span> (sayac=<span class="hljs-number">0</span>;sayac&lt;<span class="hljs-number">6</span>;sayac++) { oku.fatura_no[sayac] = fatura_no[sayac]; }

<span class="hljs-keyword">for</span> (sayac=<span class="hljs-number">0</span>;sayac&lt;<span class="hljs-number">6</span>;sayac++) { oku.satis_tarihi[sayac] = satis_tarihi[sayac]; }

oku.satis_miktari = satis_miktari; oku.birim_satis_fiyati = birim_satis_fiyati; oku.sonraki = <span class="hljs-number">-1</span>;

fwrite(&amp;oku,<span class="hljs-keyword">sizeof</span>(SATIS),<span class="hljs-number">1</span>,fp); <span class="hljs-comment">// ve büyülü satır... fclose(fp);</span>

urun_guncelle(urun_kodu, ALIS_FIYAT_MIN - <span class="hljs-number">1</span>, STOK_LIMIT_MIN - <span class="hljs-number">1</span>, <span class="hljs-number">-2</span>, link_konum); <span class="hljs-comment">/* Şu hayatta zaten ne oluyorsa iletişimsizlikten kaynaklanıyor. Bağlantıyı koparmamak lazım. urunler.dat ile satislar.dat da yukarıdaki satırla birbirine bağlanacak. */</span> } <span class="hljs-keyword">else</span> {

<span class="hljs-comment">/* Eğer o ürüne dair daha önceden bir satış kaydı varsa bu biraz uğraştırıcı... Tüm kayıtları sıradan gezmeye başlayalım, uygun olan bağı bulalım ve hooop yeni satış bilgilerini yazalım. */</span> <span class="hljs-keyword">return</span> satis_ekle(urun_kodu, fatura_no, satis_tarihi, satis_miktari, birim_satis_fiyati, link_konum, simdiki);

}

} <span class="hljs-keyword">else</span> {

<span class="hljs-keyword">if</span> ((fp=fopen (<span class="hljs-string">"satislar.dat"</span>,<span class="hljs-string">"rb+"</span>))== <span class="hljs-literal">NULL</span>) { <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>; }

fseek(fp,(sonraki<span class="hljs-number">-1</span>) * <span class="hljs-keyword">sizeof</span>(SATIS),<span class="hljs-number">0</span>); fread(&amp;oku, <span class="hljs-keyword">sizeof</span>(SATIS),<span class="hljs-number">1</span>,fp);

<span class="hljs-keyword">if</span> (sonraki == <span class="hljs-number">-1</span> || <span class="hljs-built_in">strncmp</span>(oku.satis_tarihi,satis_tarihi,<span class="hljs-number">6</span>) &lt; <span class="hljs-number">0</span>) { <span class="hljs-comment">/* Eğer girilen kayıt dosyadakinden daha büyükse işlem yapılacak */</span>

<span class="hljs-comment">/* Eğer sonraki != 0 AMA simdiki == -1 ise o zaman urunler.dat'dan ulaşılan ilk satışdayız demektir. Eğer yeni kaydedeceğimiz satış bu satıştan önce gelecekse o zaman urunler.dat'daki bağ da değişicek demektir ki işte bunun için bu özel şartı yerine getiren bir kod parçası yazacağım şimdi. */</span>

<span class="hljs-keyword">for</span> (sayac=<span class="hljs-number">0</span>;sayac&lt;<span class="hljs-number">6</span>;sayac++) { oku.fatura_no[sayac] = fatura_no[sayac]; }

<span class="hljs-keyword">for</span> (sayac=<span class="hljs-number">0</span>;sayac&lt;<span class="hljs-number">6</span>;sayac++) { oku.satis_tarihi[sayac] = satis_tarihi[sayac]; }

oku.satis_miktari = satis_miktari; oku.birim_satis_fiyati = birim_satis_fiyati; oku.sonraki = sonraki;

fseek(fp,<span class="hljs-number">0</span>,<span class="hljs-number">2</span>); <span class="hljs-comment">/* Dosya sonuna ışınlan */</span> link_konum = (ftell(fp) / <span class="hljs-keyword">sizeof</span>(SATIS)) + <span class="hljs-number">1</span>; fwrite(&amp;oku,<span class="hljs-keyword">sizeof</span>(SATIS),<span class="hljs-number">1</span>,fp);

<span class="hljs-keyword">if</span> (simdiki == <span class="hljs-number">-1</span>) { <span class="hljs-comment">/* Önceki bağ düzelt */</span>

fclose(fp); urun_guncelle(urun_kodu, ALIS_FIYAT_MIN - <span class="hljs-number">1</span>, STOK_LIMIT_MIN - <span class="hljs-number">1</span>, <span class="hljs-number">-2</span>, link_konum);

} <span class="hljs-keyword">else</span> {

fseek(fp,(simdiki<span class="hljs-number">-1</span>) * <span class="hljs-keyword">sizeof</span>(SATIS),<span class="hljs-number">0</span>); fread(&amp;oku, <span class="hljs-keyword">sizeof</span>(SATIS),<span class="hljs-number">1</span>,fp); fseek(fp,-<span class="hljs-keyword">sizeof</span>(SATIS),<span class="hljs-number">1</span>); oku.sonraki = link_konum; fwrite(&amp;oku,<span class="hljs-keyword">sizeof</span>(SATIS),<span class="hljs-number">1</span>,fp);

fclose(fp); }

} <span class="hljs-keyword">else</span> { <span class="hljs-comment">/* Yok girilen kayıt dosyadakinden daha büyük değilse bir sıkıntı yok, taramaya devam... */</span>

<span class="hljs-keyword">return</span> satis_ekle(urun_kodu, fatura_no, satis_tarihi, satis_miktari, birim_satis_fiyati, oku.sonraki, sonraki); } }

<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; }

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">satis_listele</span><span class="hljs-params">(<span class="hljs-keyword">int</span> urun_kodu, <span class="hljs-keyword">char</span> ust_limit[<span class="hljs-number">6</span>], <span class="hljs-keyword">char</span> alt_limit[<span class="hljs-number">6</span>])</span> </span>{

<span class="hljs-comment">/* 0: Başarılı. */</span> <span class="hljs-comment">/* -1: Dosya açılamadı. */</span>

FILE *fp; SATIS oku; <span class="hljs-keyword">int</span> sayac=<span class="hljs-number">0</span>; <span class="hljs-keyword">int</span> konum;

<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d numarali urunun satis listesi\n"</span>,urun_kodu); <span class="hljs-built_in">printf</span>(<span class="hljs-string">"\n"</span>); <span class="hljs-built_in">printf</span>(<span class="hljs-string">" NO FATURA NO SATIS TARIHI SATIS MIKTARI BIRIM SATIS FIYATI\n"</span>); <span class="hljs-built_in">printf</span>(<span class="hljs-string">"---- --------- ------------ ------------- ------------------\n"</span>);

konum = urun_guncelle(urun_kodu, ALIS_FIYAT_MIN<span class="hljs-number">-1</span>,STOK_LIMIT_MIN<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,LINK_GONDER); <span class="hljs-keyword">if</span> (konum == <span class="hljs-number">-1</span>) { <span class="hljs-built_in">printf</span>(<span class="hljs-string">"(hic satis kaydi yok.)\n"</span>); <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; }

<span class="hljs-keyword">if</span> ((fp=fopen (<span class="hljs-string">"satislar.dat"</span>,<span class="hljs-string">"rb+"</span>))== <span class="hljs-literal">NULL</span>) { <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>; }

<span class="hljs-keyword">while</span> (konum != <span class="hljs-number">-1</span>) { fseek(fp,(konum<span class="hljs-number">-1</span>) * <span class="hljs-keyword">sizeof</span>(SATIS),<span class="hljs-number">0</span>); fread(&amp;oku,<span class="hljs-keyword">sizeof</span>(SATIS),<span class="hljs-number">1</span>,fp); konum = oku.sonraki;

<span class="hljs-keyword">if</span> (<span class="hljs-built_in">strncmp</span>(oku.satis_tarihi,alt_limit,<span class="hljs-number">6</span>) &gt;= <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-built_in">strncmp</span>(oku.satis_tarihi,ust_limit,<span class="hljs-number">6</span>) &lt;= <span class="hljs-number">0</span> &amp;&amp; oku.fatura_no[<span class="hljs-number">0</span>] != <span class="hljs-string">'|'</span>) { sayac++; <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%4d %c%c%c%c%c%c %c%c%c%c%c%c %13d %18.4f \n"</span>,sayac,oku.fatura_no[<span class="hljs-number">0</span>],oku.fatura_no[<span class="hljs-number">1</span>],oku.fatura_no[<span class="hljs-number">2</span>],oku.fatura_no[<span class="hljs-number">3</span>],oku.fatura_no[<span class="hljs-number">4</span>],oku.fatura_no[<span class="hljs-number">5</span>],oku.satis_tarihi[<span class="hljs-number">0</span>],oku.satis_tarihi[<span class="hljs-number">1</span>],oku.satis_tarihi[<span class="hljs-number">2</span>],oku.satis_tarihi[<span class="hljs-number">3</span>],oku.satis_tarihi[<span class="hljs-number">4</span>],oku.satis_tarihi[<span class="hljs-number">5</span>],oku.satis_miktari,oku.birim_satis_fiyati); } }

fclose(fp);

}

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">satis_sil</span><span class="hljs-params">(<span class="hljs-keyword">int</span> urun_kodu, <span class="hljs-keyword">char</span> fatura_no[<span class="hljs-number">6</span>])</span> </span>{

<span class="hljs-comment">/* 1: Öyle bir fatura no yok */</span> <span class="hljs-comment">/* 0: Başarılı. */</span> <span class="hljs-comment">/* -1: Dosya açılamadı. */</span>

FILE *fp; SATIS oku; <span class="hljs-keyword">int</span> konum;

konum = urun_guncelle(urun_kodu, ALIS_FIYAT_MIN<span class="hljs-number">-1</span>,STOK_LIMIT_MIN<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>,LINK_GONDER); <span class="hljs-keyword">if</span> (konum == <span class="hljs-number">-1</span>) { <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>; }

<span class="hljs-keyword">if</span> ((fp=fopen (<span class="hljs-string">"satislar.dat"</span>,<span class="hljs-string">"rb+"</span>))== <span class="hljs-literal">NULL</span>) { <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>; }

<span class="hljs-keyword">while</span> (konum != <span class="hljs-number">-1</span>) { fseek(fp,(konum<span class="hljs-number">-1</span>) * <span class="hljs-keyword">sizeof</span>(SATIS),<span class="hljs-number">0</span>); fread(&amp;oku,<span class="hljs-keyword">sizeof</span>(SATIS),<span class="hljs-number">1</span>,fp); konum = oku.sonraki;

<span class="hljs-keyword">if</span> (<span class="hljs-built_in">strncmp</span>(oku.fatura_no,fatura_no,<span class="hljs-number">6</span>) == <span class="hljs-number">0</span>) { <span class="hljs-comment">/* EVET! Silinecek faturayı bulduk!!!!! */</span> fseek(fp,-<span class="hljs-keyword">sizeof</span>(SATIS),<span class="hljs-number">1</span>); oku.fatura_no[<span class="hljs-number">0</span>] = <span class="hljs-string">'|'</span>; fwrite(&amp;oku,<span class="hljs-keyword">sizeof</span>(SATIS),<span class="hljs-number">1</span>,fp); fclose(fp); <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; } }

fclose(fp); <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>; }

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">listele</span><span class="hljs-params">()</span> </span>{

<span class="hljs-comment">/* Bu fonksiyon kontrol için, asıl programda işe yaramaz. */</span> FILE *fp; URUN urun; <span class="hljs-keyword">int</span> sayac=<span class="hljs-number">0</span>; <span class="hljs-keyword">int</span> gecici; <span class="hljs-keyword">if</span> ((fp=fopen (<span class="hljs-string">"urunler.dat"</span>,<span class="hljs-string">"rb+"</span>))== <span class="hljs-literal">NULL</span>) { <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Urunler.dat acilamadi. Gidiyorum ben."</span>); <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>; }

fseek(fp,<span class="hljs-number">0</span>,<span class="hljs-number">2</span>); gecici = ftell(fp)/<span class="hljs-keyword">sizeof</span>(URUN); <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Kayit sayisi: %d\n\n"</span>, gecici); fseek(fp,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>);

<span class="hljs-keyword">for</span> (sayac=<span class="hljs-number">1</span>;sayac&lt;=gecici;sayac++) { fread(&amp;urun,<span class="hljs-keyword">sizeof</span>(URUN),<span class="hljs-number">1</span>,fp); <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%3d %4d %20s %6.2f %2d %4d %2d\n"</span>,sayac,urun.urun_kodu,urun.urun_adi,urun.birim_alis_fiyati,urun.stok_miktari, urun.sonraki, urun.link); }

fclose(fp); }

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">listele2</span><span class="hljs-params">()</span> </span>{

<span class="hljs-comment">/* Bu fonksiyon kontrol için, asıl programda işe yaramaz. */</span>

FILE *fp; SATIS urun; <span class="hljs-keyword">int</span> sayac=<span class="hljs-number">0</span>; <span class="hljs-keyword">int</span> gecici; <span class="hljs-keyword">if</span> ((fp=fopen (<span class="hljs-string">"satislar.dat"</span>,<span class="hljs-string">"rb+"</span>))== <span class="hljs-literal">NULL</span>) { <span class="hljs-built_in">printf</span>(<span class="hljs-string">"satislar.dat acilamadi."</span>); <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>; }

fseek(fp,<span class="hljs-number">0</span>,<span class="hljs-number">2</span>); gecici = ftell(fp)/<span class="hljs-keyword">sizeof</span>(SATIS); <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Kayit sayisi: %d\n\n"</span>, gecici); fseek(fp,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>);

<span class="hljs-keyword">for</span> (sayac=<span class="hljs-number">1</span>;sayac&lt;=gecici;sayac++) { fread(&amp;urun,<span class="hljs-keyword">sizeof</span>(SATIS),<span class="hljs-number">1</span>,fp); <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%3d %c%c%c%c%c%c %c%c%c%c%c%c %5d %6.2f %2d\n"</span>,sayac,urun.fatura_no[<span class="hljs-number">0</span>],urun.fatura_no[<span class="hljs-number">1</span>],urun.fatura_no[<span class="hljs-number">2</span>],urun.fatura_no[<span class="hljs-number">3</span>],urun.fatura_no[<span class="hljs-number">4</span>],urun.fatura_no[<span class="hljs-number">5</span>],urun.satis_tarihi[<span class="hljs-number">0</span>],urun.satis_tarihi[<span class="hljs-number">1</span>],urun.satis_tarihi[<span class="hljs-number">2</span>],urun.satis_tarihi[<span class="hljs-number">3</span>],urun.satis_tarihi[<span class="hljs-number">4</span>],urun.satis_tarihi[<span class="hljs-number">5</span>],urun.satis_miktari,urun.birim_satis_fiyati,urun.sonraki); }

fclose(fp); }

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{

<span class="hljs-comment">/* Acilis yazilari BASLANGICI */</span> <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Umut BENZER\n"</span>); <span class="hljs-built_in">printf</span>(<span class="hljs-string">"05-06-7670\n"</span>); <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Ege Universitesi Bilgisayar Muhendisligi 1\. Sinif\n"</span>); <span class="hljs-built_in">printf</span>(<span class="hljs-string">"http://www.ubenzer.com\n"</span>); <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Odev 4 (0.1)\n\n"</span>); <span class="hljs-comment">/* Acilis yazilari SONU */</span>

<span class="hljs-keyword">int</span> sag_serbest=<span class="hljs-number">-1</span>; <span class="hljs-keyword">int</span> sayac; <span class="hljs-keyword">int</span> girdi; <span class="hljs-keyword">char</span> girdi2[<span class="hljs-number">20</span>]; <span class="hljs-keyword">float</span> girdi3; <span class="hljs-keyword">int</span> girdi4; <span class="hljs-keyword">char</span> girdi5[<span class="hljs-number">6</span>]; <span class="hljs-keyword">char</span> girdi6[<span class="hljs-number">6</span>]; <span class="hljs-keyword">char</span> secenek; <span class="hljs-comment">/* Girdi degiskenleri main fonksiyonun her bir yerinde farkli farkli bir sürü amaçla kullanıldığı için özel isimler vermedim. */</span>

<span class="hljs-comment">/* Dosyayi sifirdan yaratalim */</span> <span class="hljs-comment">/* Odev kontrolunde kolaylik saglamasi acisindan dosyanin her acilista silinmesi ve tekrar yaratilmasi istendi. Programin gerceginde bunun iptal edilmesini saglamak icin asagidaki satirlar comment yapilabilir. */</span>

FILE *fp; URUN yaz={<span class="hljs-number">-1</span>,<span class="hljs-string">""</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>};

remove (<span class="hljs-string">"urunler.dat"</span>); <span class="hljs-comment">// Eğer dosyalar varsa silinir. remove ("satislar.dat"); // Eğer dosyalar varsa silinir.</span>

<span class="hljs-keyword">if</span> ((fp=fopen (<span class="hljs-string">"urunler.dat"</span>,<span class="hljs-string">"w+b"</span>))== <span class="hljs-literal">NULL</span>) { <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Urunler.dat yaratilamadi. Gidiyorum ben."</span>); <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; }

<span class="hljs-keyword">for</span> (sayac=<span class="hljs-number">0</span>;sayac&lt;kayit_say;sayac++) {=<span class="hljs-string">""</span> fwrite(&amp;yaz,<span class="hljs-keyword">sizeof</span>(urun),<span class="hljs-number">1</span>,fp);=<span class="hljs-string">""</span> }&lt;=<span class="hljs-string">""</span> p=<span class="hljs-string">""</span>&gt;&lt;/kayit_say;sayac++)&gt;

fclose(fp);

<span class="hljs-keyword">if</span> ((fp=fopen (<span class="hljs-string">"satislar.dat"</span>,<span class="hljs-string">"w+b"</span>))== <span class="hljs-literal">NULL</span>) { <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Satislar.dat yaratilamadi. Gidiyorum ben."</span>); <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; }

fclose(fp);

<span class="hljs-comment">/* Dosyayi sifirdan yaratalim kısmınnın SONU */</span>

<span class="hljs-comment">/* Ana döngü */</span> <span class="hljs-keyword">while</span> (sag_serbest==<span class="hljs-number">-1</span>) {

<span class="hljs-comment">// Eğer her başlangıçta ürüner.dat'ın içerğini görmek istiyorsanız commenti kaldırın.</span>

<span class="hljs-comment">/* listele(); beklet(); listele2(); beklet();

/* menu BASLANGICI */</span> <span class="hljs-built_in">printf</span>(<span class="hljs-string">"*** Menu *** \n\n"</span>); <span class="hljs-built_in">printf</span>(<span class="hljs-string">"1\. Yeni bir urunun eklenmesi \n"</span>); <span class="hljs-built_in">printf</span>(<span class="hljs-string">"2\. Bir urunun birim alis fiyatinin ve stok miktarinin guncellenmesi \n"</span>); <span class="hljs-built_in">printf</span>(<span class="hljs-string">"3\. Bir urune iliskin satis eklenmesi \n"</span>); <span class="hljs-built_in">printf</span>(<span class="hljs-string">"4\. Bir urune iliskin satisin silinmesi \n"</span>); <span class="hljs-built_in">printf</span>(<span class="hljs-string">"5\. Bir urunden yapilan tum satislarin listelenmesi \n"</span>); <span class="hljs-built_in">printf</span>(<span class="hljs-string">"6\. Bir urunden iki tarih arasinda yapilen tum satislarin listelenmesi \n"</span>); <span class="hljs-built_in">printf</span>(<span class="hljs-string">"7\. Cikis \n"</span>);

<span class="hljs-built_in">printf</span>(<span class="hljs-string">"Lutfen istediginiz islemin numarasini giriniz.\n"</span>); <span class="hljs-comment">/*menu BITIMI */</span>

secenek=getche(); system (<span class="hljs-string">"cls"</span>);

<span class="hljs-comment">/* secenek getche ile alındığı için ASCII koduna göre switch yapısına sokulabilir. */</span>

<span class="hljs-comment">/* Her CASE için aşağıdaki not geçerlidir. */</span>

<span class="hljs-comment">/* Gerekli saçma sapan veri kontrolleri ve doğru girdi için ilgili fonksiyonların çağırılması, fonksiyon- lardan cevap alınması ve bunların işlenmesi.

Ayrıntılı bilgi için her fonksiyona ayrı ayrı baka- bilirsiniz. */</span>

<span class="hljs-keyword">switch</span>(secenek) { <span class="hljs-keyword">case</span> <span class="hljs-number">49</span>: <span class="hljs-comment">//1</span>

girdi = <span class="hljs-number">-1</span>; <span class="hljs-keyword">while</span> (girdi &lt; URUN_NO_MIN) { system (<span class="hljs-string">"cls"</span>); <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Yeni bir urun kodu giriniz: \n"</span>); <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Zaten var olan bir urunun ustune\n"</span>); <span class="hljs-built_in">printf</span>(<span class="hljs-string">"yazmaya calisirsaniz uyarilacaksiniz.)\n"</span>); <span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d"</span>,&amp;girdi); } system (<span class="hljs-string">"cls"</span>);

<span class="hljs-keyword">switch</span> (urun_var_mi(girdi,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>)) {

<span class="hljs-keyword">case</span> <span class="hljs-number">0</span>: <span class="hljs-comment">/* Hayır, yok. */</span>

<span class="hljs-keyword">for</span> (sayac=<span class="hljs-number">0</span>;sayac&lt;<span class="hljs-number">20</span>;sayac++) { girdi2[sayac] = <span class="hljs-literal">NULL</span>; }

<span class="hljs-keyword">while</span> (girdi2[<span class="hljs-number">0</span>] == <span class="hljs-literal">NULL</span>) { fflush(<span class="hljs-built_in">stdin</span>); <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Yeni urunun adini giriniz: "</span>); gets(girdi2); }

girdi3 = ALIS_FIYAT_MIN - <span class="hljs-number">1</span>; <span class="hljs-keyword">while</span> (girdi3 &lt; ALIS_FIYAT_MIN) { <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Urunun alis fiyatini giriniz: "</span>); <span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%f"</span>,&amp;girdi3); }

girdi4 = STOK_LIMIT_MIN<span class="hljs-number">-1</span>; <span class="hljs-keyword">while</span> (girdi4 &lt; STOK_LIMIT_MIN) { <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Urunun stok durumunu giriniz: "</span>); <span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d"</span>,&amp;girdi4); }

<span class="hljs-keyword">switch</span> (urun_ekle(girdi,girdi2,girdi3,girdi4,<span class="hljs-number">-1</span>)) { <span class="hljs-keyword">case</span> <span class="hljs-number">-1</span>: <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Dosya acilamadi. :("</span>); <span class="hljs-keyword">break</span>; <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>: <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Ekleme basarili. Tebrik ederim. :)"</span>); <span class="hljs-keyword">break</span>; } <span class="hljs-keyword">break</span>;

<span class="hljs-keyword">case</span> <span class="hljs-number">-1</span>: <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Dosya acilamadi. :("</span>); <span class="hljs-keyword">break</span>;

<span class="hljs-keyword">case</span> <span class="hljs-number">-2</span>: <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Girdiginiz urun kodu daha once alinmis."</span>); <span class="hljs-keyword">break</span>; }

beklet(); <span class="hljs-keyword">break</span>; <span class="hljs-keyword">case</span> <span class="hljs-number">50</span>: <span class="hljs-comment">//2</span>

girdi = <span class="hljs-number">-1</span>; <span class="hljs-keyword">while</span> (girdi &lt; URUN_NO_MIN) { system (<span class="hljs-string">"cls"</span>); <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Duzenlenecek urun kodunu giriniz: \n"</span>); <span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d"</span>,&amp;girdi); } system (<span class="hljs-string">"cls"</span>);

<span class="hljs-keyword">switch</span> (urun_var_mi(girdi,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>)) {

<span class="hljs-keyword">case</span> <span class="hljs-number">-2</span>: <span class="hljs-comment">/* Evet var. */</span>

girdi3 = ALIS_FIYAT_MIN - <span class="hljs-number">1</span>; <span class="hljs-keyword">while</span> (girdi3 &lt; ALIS_FIYAT_MIN) { <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Urunun yeni alis fiyatini giriniz: "</span>); <span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%f"</span>,&amp;girdi3); }

girdi4 = STOK_LIMIT_MIN<span class="hljs-number">-1</span>; <span class="hljs-keyword">while</span> (girdi4 &lt; STOK_LIMIT_MIN) { <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Urunun yeni stok durumunu giriniz: "</span>); <span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d"</span>,&amp;girdi4); }

<span class="hljs-keyword">switch</span> (urun_guncelle(girdi,girdi3,girdi4,<span class="hljs-number">-1</span>,LINK_AYNI)) { <span class="hljs-keyword">case</span> <span class="hljs-number">-1</span>: <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Dosya acilamadi. :("</span>); <span class="hljs-keyword">break</span>; <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>: <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Duzenleme basarili. Tebrik ederim. :)"</span>); <span class="hljs-keyword">break</span>; } <span class="hljs-keyword">break</span>;

<span class="hljs-keyword">case</span> <span class="hljs-number">-1</span>: <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Dosya acilamadi. :("</span>); <span class="hljs-keyword">break</span>;

<span class="hljs-keyword">case</span> <span class="hljs-number">0</span>: <span class="hljs-comment">/* Hayır, yok */</span> <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Boyle bir urun yok."</span>); <span class="hljs-keyword">break</span>; } beklet(); <span class="hljs-keyword">break</span>;

<span class="hljs-keyword">case</span> <span class="hljs-number">51</span>: <span class="hljs-comment">//3</span>

girdi = <span class="hljs-number">-1</span>; <span class="hljs-keyword">while</span> (girdi &lt; URUN_NO_MIN) { system (<span class="hljs-string">"cls"</span>); <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Satis eklenecek urun kodunu giriniz: \n"</span>); <span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d"</span>,&amp;girdi); } system (<span class="hljs-string">"cls"</span>);

<span class="hljs-keyword">switch</span> (urun_var_mi(girdi,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>)) {

<span class="hljs-keyword">case</span> <span class="hljs-number">-2</span>: <span class="hljs-comment">/* Evet var. */</span>

<span class="hljs-keyword">for</span> (sayac=<span class="hljs-number">0</span>;sayac&lt;<span class="hljs-number">6</span>;sayac++) { girdi5[sayac] = <span class="hljs-literal">NULL</span>; }

<span class="hljs-keyword">while</span> (girdi5[<span class="hljs-number">0</span>] == <span class="hljs-literal">NULL</span>) { fflush(<span class="hljs-built_in">stdin</span>); <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Fatura kodunu giriniz (6 karakter): "</span>); gets(girdi5); }

<span class="hljs-keyword">for</span> (sayac=<span class="hljs-number">0</span>;sayac&lt;<span class="hljs-number">6</span>;sayac++) { girdi6[sayac] = <span class="hljs-literal">NULL</span>; }

<span class="hljs-keyword">while</span> (girdi6[<span class="hljs-number">0</span>] == <span class="hljs-literal">NULL</span>) { fflush(<span class="hljs-built_in">stdin</span>); <span class="hljs-comment">/* Ödevin asıl amacının tarihlerle değil de dosyalamayla uğraşmak olduğu bilindiğinden 2000 öncesi yıllar için sıralama sorunu ihmal edildi. */</span> <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Satis tarihini giriniz (YYAAGG): "</span>); gets(girdi6); }

girdi4 = STOK_LIMIT_MIN<span class="hljs-number">-1</span>; <span class="hljs-keyword">while</span> (girdi4 &lt; STOK_LIMIT_MIN) { <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Urunun satis miktarini giriniz: "</span>); <span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d"</span>,&amp;girdi4); }

girdi3 = ALIS_FIYAT_MIN - <span class="hljs-number">1</span>; <span class="hljs-keyword">while</span> (girdi3 &lt; ALIS_FIYAT_MIN) { <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Birim satis fiyatini giriniz: "</span>); <span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%f"</span>,&amp;girdi3); }

<span class="hljs-keyword">switch</span> (satis_ekle(girdi, girdi5, girdi6, girdi4, girdi3,<span class="hljs-number">-2</span>,<span class="hljs-number">-1</span>)) { <span class="hljs-keyword">case</span> <span class="hljs-number">-1</span>: <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Dosya acilamadi. :("</span>); <span class="hljs-keyword">break</span>; <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>: <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Satis eklendi. Oleeey!"</span>); <span class="hljs-keyword">break</span>; }

<span class="hljs-keyword">break</span>; <span class="hljs-keyword">case</span> <span class="hljs-number">-1</span>: <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Dosya acilamadi. :("</span>); <span class="hljs-keyword">break</span>;

<span class="hljs-keyword">case</span> <span class="hljs-number">0</span>: <span class="hljs-comment">/* Hayır, yok */</span> <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Boyle bir urun yok."</span>); <span class="hljs-keyword">break</span>; } beklet(); <span class="hljs-keyword">break</span>; <span class="hljs-keyword">case</span> <span class="hljs-number">52</span>: <span class="hljs-comment">//4</span>

girdi = <span class="hljs-number">-1</span>; <span class="hljs-keyword">while</span> (girdi &lt; URUN_NO_MIN) { system (<span class="hljs-string">"cls"</span>); <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Ilgili urun kodunu giriniz: \n"</span>); <span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d"</span>,&amp;girdi); } system (<span class="hljs-string">"cls"</span>);

<span class="hljs-keyword">switch</span> (urun_var_mi(girdi,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>)) {

<span class="hljs-keyword">case</span> <span class="hljs-number">-2</span>: <span class="hljs-comment">/* Evet var. */</span>

<span class="hljs-keyword">for</span> (sayac=<span class="hljs-number">0</span>;sayac&lt;<span class="hljs-number">6</span>;sayac++) { girdi5[sayac] = <span class="hljs-literal">NULL</span>; }

<span class="hljs-keyword">while</span> (girdi5[<span class="hljs-number">0</span>] == <span class="hljs-literal">NULL</span>) { fflush(<span class="hljs-built_in">stdin</span>); <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Silinecek fatura kodunu giriniz (6 karakter): "</span>); gets(girdi5); }

<span class="hljs-keyword">switch</span> (satis_sil(girdi, girdi5)) { <span class="hljs-keyword">case</span> <span class="hljs-number">-1</span>: <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Dosya acilamadi. :("</span>); <span class="hljs-keyword">break</span>; <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>: <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Satis bilgisi silindi."</span>); <span class="hljs-keyword">break</span>; <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>: <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Boyle bir fatura yok. Silinemedi."</span>); <span class="hljs-keyword">break</span>; }

<span class="hljs-keyword">break</span>; <span class="hljs-keyword">case</span> <span class="hljs-number">-1</span>: <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Dosya acilamadi. :("</span>); <span class="hljs-keyword">break</span>;

<span class="hljs-keyword">case</span> <span class="hljs-number">0</span>: <span class="hljs-comment">/* Hayır, yok */</span> <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Boyle bir urun yok."</span>); <span class="hljs-keyword">break</span>; } beklet(); <span class="hljs-keyword">break</span>; <span class="hljs-keyword">case</span> <span class="hljs-number">53</span>: <span class="hljs-comment">//5 girdi = -1; while (girdi &lt; URUN_NO_MIN) { system ("cls"); printf("Satis listesi gosterilecek urun kodunu giriniz: \n"); scanf("%d",&amp;girdi); } system ("cls");</span>

<span class="hljs-keyword">switch</span> (urun_var_mi(girdi,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>)) {

<span class="hljs-keyword">case</span> <span class="hljs-number">-2</span>: <span class="hljs-comment">/* Evet var. */</span> satis_listele(girdi, <span class="hljs-string">"999999"</span>, <span class="hljs-string">"000000"</span>); <span class="hljs-keyword">break</span>; <span class="hljs-keyword">case</span> <span class="hljs-number">-1</span>: <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Dosya acilamadi. :("</span>); <span class="hljs-keyword">break</span>;

<span class="hljs-keyword">case</span> <span class="hljs-number">0</span>: <span class="hljs-comment">/* Hayır, yok */</span> <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Boyle bir urun yok."</span>); <span class="hljs-keyword">break</span>; } beklet(); <span class="hljs-keyword">break</span>; <span class="hljs-keyword">case</span> <span class="hljs-number">54</span>: <span class="hljs-comment">//6</span>

girdi = <span class="hljs-number">-1</span>; <span class="hljs-keyword">while</span> (girdi &lt; URUN_NO_MIN) { system (<span class="hljs-string">"cls"</span>); <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Satis listesi gosterilecek urun kodunu giriniz: \n"</span>); <span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d"</span>,&amp;girdi); } system (<span class="hljs-string">"cls"</span>);

<span class="hljs-keyword">switch</span> (urun_var_mi(girdi,<span class="hljs-number">-1</span>,<span class="hljs-number">-1</span>)) {

<span class="hljs-keyword">case</span> <span class="hljs-number">-2</span>: <span class="hljs-comment">/* Evet var. */</span>

<span class="hljs-keyword">for</span> (sayac=<span class="hljs-number">0</span>;sayac&lt;<span class="hljs-number">6</span>;sayac++) { girdi5[sayac] = <span class="hljs-literal">NULL</span>; }

<span class="hljs-keyword">while</span> (girdi5[<span class="hljs-number">0</span>] == <span class="hljs-literal">NULL</span>) { fflush(<span class="hljs-built_in">stdin</span>); <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Ust limiti girin (yyaagg): "</span>); gets(girdi5); } system (<span class="hljs-string">"cls"</span>);

<span class="hljs-keyword">for</span> (sayac=<span class="hljs-number">0</span>;sayac&lt;<span class="hljs-number">6</span>;sayac++) { girdi6[sayac] = <span class="hljs-literal">NULL</span>; }

<span class="hljs-keyword">while</span> (girdi6[<span class="hljs-number">0</span>] == <span class="hljs-literal">NULL</span>) { fflush(<span class="hljs-built_in">stdin</span>); <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Alt limiti girin (yyaagg): "</span>); gets(girdi6); } system (<span class="hljs-string">"cls"</span>);

satis_listele(girdi, girdi5, girdi6); <span class="hljs-keyword">break</span>; <span class="hljs-keyword">case</span> <span class="hljs-number">-1</span>: <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Dosya acilamadi. :("</span>); <span class="hljs-keyword">break</span>;

<span class="hljs-keyword">case</span> <span class="hljs-number">0</span>: <span class="hljs-comment">/* Hayır, yok */</span> <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Boyle bir urun yok."</span>); <span class="hljs-keyword">break</span>; } beklet(); <span class="hljs-keyword">break</span>; <span class="hljs-keyword">case</span> <span class="hljs-number">55</span>: <span class="hljs-comment">//7 /* E e H h ve disinda girdi kabul etmeyen cikmak istiyor musunuz sorusu BASLANGICI */ do { printf ("\nCidden cikmak istiyor musunuz? (E/H) "); secenek = getche(); if (secenek == 'E' || secenek == 'e') { sag_serbest = 0; secenek = 'H'; } } while (secenek != 'H' &amp;&amp; secenek != 'h'); /* E e H h ve disinda girdi kabul etmeyen cikmak istiyor musunuz sorusu SONU */ system ("cls"); break; default: /* Elleri yanlis tusa basan kullanicilar icin yazilan bolum BASLANGICI */ printf("Bir zahmet 1'den 7'ye kadar bir secim yapin."); beklet(); /* Elleri yanlis tusa basan kullanicilar icin yazilan bolum SONU */ break; } }</span>

<span class="hljs-built_in">printf</span>(<span class="hljs-string">"O halde hoscakalin. :)\n\n\n"</span>); <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; }
</code></pre>
</div></div></article><div class="card comments main-container__items"><div class="card__contents" id="disqus_thread"></div></div></div><div class="sidebar main-content__sidebar"><div class="about"><img class="about__image" src="/img/profile.jpg"/><h1 class="about__name">Umut Benzer</h1><h2 class="about__mini-bio">Software Engineer in Berlin</h2></div></div></div><div class="main-container"><div class="footer"><div class="footer__copyright-holder"><p><a href="http://creativecommons.org/licenses/by-nc-nd/4.0/" rel="license noopener noreferrer" target="_blank"><img alt="Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License" src="/img/cclicense.png"/></a></p><p><span>Bu sitedeki tüm yazı ve görseller </span><a href="http://creativecommons.org/licenses/by-nc-nd/4.0/" rel="license noopener noreferrer" target="_blank">Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License</a><span> ile lisanslanmıştır.</span></p></div><div class="footer__generator"><span>Bu sayfa </span><span>1 Mayıs 2017</span><span> tarihinde </span><a href="https://github.com/ubenzer/fil" target="_blank">Fil</a><span> ile yaratılmıştır.</span></div></div></div></div>
        <script src="/app.js" type="text/javascript"></script><script type="text/javascript">
        var disqus_config = function () {
          this.page.url = "https://ubenzer.com/2008/04/odev-4-dogrudan-erisimli-dosyalarda-hashing-ve-baglacli-liste-yaklasimi/";
          this.page.identifier = "post@/2008/04/odev-4-dogrudan-erisimli-dosyalarda-hashing-ve-baglacli-liste-yaklasimi";
        };
        (function() {
          var d = document, s = d.createElement('script');
          s.src = 'https://ubenzer.disqus.com/embed.js';
          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
        </script><script type="text/javascript">
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-509698-8', 'auto');
      ga('send', 'pageview');
      </script>
      </body>
    </html>
  